<modification>
    <id>Admin Enhanced without filemanager</id>
    <version>1.8</version>
    <vqmver>2.4.1</vqmver>
    <author>SBWD</author>

<!-- Language Files -->
    <file name="admin/language/english/setting/setting.php">
        <operation>
            <search position="before"><![CDATA[?>]]></search>
            <add><![CDATA[

// Admin Enhanced
$_['tab_enhanced']                 = 'Advanced';
$_['tab_dashboard']                = 'Dashboard Settings';
$_['tab_products']                 = 'Product Settings';
$_['tab_categories']               = 'Category Settings';
$_['tab_customers']                = 'Customer Settings';
$_['tab_orders']               	   = 'Order Settings';
$_['tab_other']                    = 'Other Settings';
$_['entry_edate']                  = 'Show Date and Time in Admin:';
$_['entry_eqick']                  = 'Show Shortcuts:';
$_['entry_estat']                  = 'Show Overview/Statistics:';
$_['entry_etabs']                  = 'Show Latest 10 Tabs:';
$_['entry_egana']                  = 'Show Google Analytics:<br /><span class="help">Two fields below required!</span>';
$_['entry_eapi_key']         	   = 'OOcharts API Key:<br /><span class="help"><a href="https://app.oocharts.com">https://app.oocharts.com</a></span>';
$_['entry_eprofile_id']      	   = 'OOcharts Profile ID:<br /><span class="help"><a href="https://app.oocharts.com">https://app.oocharts.com</a></span>';
$_['entry_eprod1']                 = 'Enable Ajax Edit:<br /><span class="help">On product list.</span>';
$_['entry_eprod2']                 = 'Enable/Disable Products:<br /><span class="help">On product list.</span>';
$_['entry_eprod3']                 = 'Show Product Names:<br /><span class="help">When editing products.</span>';
$_['entry_eprod4']                 = 'Show Category Filter:<br /><span class="help">On product list.</span>';
$_['entry_eprod7']                 = 'Enable Fixed Button Header:<br /><span class="help">On product list.</span>';
$_['entry_eprod9']                 = 'Use Enhanced Product Form:<br /><span class="help">On product list.</span>';
$_['entry_ecats']                  = 'Show Product Enabled/Total:<br /><span class="help">On category list.</span>';
$_['entry_ecats1']                 = 'Show Enable/Disable categories:<br /><span class="help">On category list.</span>';
$_['entry_ecats2']                 = 'Enable View Products Link:<br /><span class="help">On category list.</span>';
$_['entry_ecats4']                 = 'Enable Fixed Button Header:<br /><span class="help">On category list.</span>';
$_['entry_ecats5']                 = 'Show Category Names:<br /><span class="help">When editing categories.</span>';
$_['entry_ecats7']                 = 'Use Enhanced Category Form:<br /><span class="help">On product list.</span>';
$_['entry_emisc1']                 = 'Show Icons on Admin Menu:';
$_['entry_emisc3']                 = 'Enable Clear Filters:<br /><span class="help">Products, orders, customers.</span>';
$_['entry_emisc4']                 = 'Enable Highlight Table Rows:';
$_['entry_emisc5']                 = 'Enable Fixed Button Header:<br /><span class="help">On Settings page.</span>';
$_['entry_emisc6']                 = 'Enable Tooltips:';
// Admin Enhanced
            ]]></add>
        </operation>
    </file>
	
	<file name="admin/language/english/common/home.php">
    	<operation error="log">
      		<search position="before"><![CDATA[?>]]></search>
      		<add><![CDATA[
// Admin Enhanced
$_['text_latest']           = 'Latest 10';
$_['text_ga_summary']       = 'Google Analytics (summary)';
$_['text_ga_visits']        = 'Visits';
$_['text_ga_visitors']      = 'Unique Visitors';
$_['text_ga_pageviews']     = 'PageViews';
$_['tab_order']             = 'Orders';
$_['tab_customer']          = 'Customers';
$_['tab_review']            = 'Reviews';
$_['tab_return']            = 'Returns';
$_['column_name']           = 'Customer Name';
$_['column_email']          = 'E-Mail';
$_['column_customer_group'] = 'Customer Group';
$_['column_status']         = 'Status'; 
$_['column_date_added']     = 'Date Added';
$_['column_product']        = 'Product';
$_['column_author']         = 'Author';
$_['column_rating']         = 'Rating';
$_['column_return_id']      = 'Return ID';
$_['column_order_id']       = 'Order ID';
$_['column_customer']       = 'Customer';
$_['column_product']        = 'Product';
$_['column_model']          = 'Model';
// Admin Enhanced
      ]]></add>
    	</operation>
    </file>
	
	<file name="admin/language/english/setting/store.php" error="skip">
		<operation>
			<search position="after"><![CDATA[// Entry]]></search>
			<add><![CDATA[
// Admin Enhanced
$_['entry_eapi_key']         = 'OOcharts API Key:';
$_['entry_eprofile_id']      = 'OOcharts Profile ID:';
// Admin Enhanced
]]></add>
		</operation>
	</file>
	
	<file name="admin/language/english/english.php">		
		<operation error="log">
			<search position="after">
			<![CDATA[
$_['button_insert']                 = 'Insert';
			]]></search> 
			<add><![CDATA[
// Admin Enhanced
$_['button_clear_filters'] 			= 'Clear Filters';
// Admin Enhanced
			]]></add>
		</operation>
	</file>
	
	<file name="admin/language/english/common/header.php">
	    <operation>
		    <search position="before"><![CDATA[?>]]></search>
			<add><![CDATA[
// Admin Enhanced
$_['text_january']                     = 'January';
$_['text_february']                    = 'February';
$_['text_march']                       = 'March';
$_['text_april']                       = 'April';
$_['text_may']                         = 'May';
$_['text_june']                        = 'June';
$_['text_july']                        = 'July';
$_['text_august']                      = 'August';
$_['text_september']                   = 'September';
$_['text_october']                     = 'October';
$_['text_november']                    = 'November';
$_['text_december']                    = 'December';
$_['text_year']                        = '';
// Admin Enhanced
			]]></add>
		</operation>
	</file>
	
	<file name="admin/language/english/catalog/product.php">		
		<operation error="log">
			<search position="before"><![CDATA[?>]]></search>
			<add><![CDATA[
// Admin Enhanced
$_['tab_seo']       		  = 'SEO';
$_['text_imgsaved']       	  = 'Success: Product Image has been saved!';
$_['text_namsaved']       	  = 'Success: Product Name has been saved!';
$_['text_modsaved']       	  = 'Success: Product Model has been saved!';
$_['text_prcsaved']       	  = 'Success: Product Price has been saved!';
$_['text_spcsaved']       	  = 'Success: Product Special has been saved!';
$_['text_qtysaved']       	  = 'Success: Product Quantity has been saved!';
$_['text_stasaved']       	  = 'Success: Product Status has been saved!';
$_['text_ordsaved']       	  = 'Success: Product Order has been saved!';
$_['text_img_remove']         = '<img src="view/image/delete.png" alt="Remove" style="cursor:pointer" />';
$_['text_img_edit']           = '<img src="view/image/edit.png" alt="Edit" style="cursor:pointer" />';
$_['text_product_enabled']    = 'You have Enabled %s Products!';
$_['text_product_disabled']   = 'You have Disabled %s Products!';
$_['text_enabled2']           = '<img src="view/image/enabled.png" alt="Enabled" />';
$_['text_disabled2']          = '<img src="view/image/disabled.png" alt="Disabled" />';
$_['text_esave']              = '<img src="view/image/save.png" alt="Save" title="Save" />';
$_['text_ecancel']            = '<img src="view/image/cancel.png" alt="Cancel" title="Cancel" />';
$_['text_ecfilter']           = '<span style="color:#990000"><strong>Category Filter:</strong></span>';
$_['text_eallcats']           = 'All Categories';
$_['text_emfilter']           = '<span style="color:#990000"><strong>Manufacturer Filter:</strong></span>';
$_['text_eallmanu']           = 'All Manufacturers';
$_['text_sort_order']         = 'Sort';
$_['text_eedit']         	  = '<img src="view/image/review.png" alt="Edit" style="cursor:pointer" />';
$_['text_eview']         	  = '<img src="../eadmin/image/menu/preview.png" alt="Edit" style="cursor:pointer" />';
$_['text_select_all']         = 'Select All';
$_['text_unselect_all']       = 'Unselect all';
$_['entry_manufacturer']      = 'Manufacturer:';
$_['entry_category']          = 'Categories:';
$_['entry_related']           = 'Related Products:';
$_['button_enable']			  = 'Enable';
$_['button_disable']		  = 'Disable';
$_['entry_keyword']           = 'SEO Keyword:';
// Admin Enhanced
			]]></add>
		</operation>		
	</file>

	<file name="admin/language/english/catalog/category.php">		
		<operation error="log">
			<search position="before"><![CDATA[?>]]></search> 
			<add><![CDATA[
// Admin Enhanced
$_['tab_seo']       		   = 'SEO';
$_['text_eedit']         	   = '<img src="view/image/review.png" alt="Edit" style="cursor:pointer" />';
$_['text_eview']         	   = '<img src="view/image/preview.png" alt="Edit" style="cursor:pointer" />';
$_['text_esort']         	   = '<img src="view/image/edit.png" alt="Edit" style="cursor:pointer" />';
$_['column_status']            = 'Status';
$_['text_cenabtot']            = ' (Enabled Products / Total Products)';
$_['text_cviewprods']          = '<img src="../eadmin/image/view-products.png" alt="View Products" style="cursor:pointer" />';
$_['text_category_enabled']    = 'You have Enabled %s Categories!';
$_['text_category_disabled']   = 'You have Disabled %s Categories!';
$_['text_enabled2']            = '<img src="view/image/enabled.png" alt="Enabled" />';
$_['text_disabled2']           = '<img src="view/image/disabled.png" alt="Disabled" />';
$_['text_ordsaved']       	   = 'Success: Category Sort Order has been saved!';
$_['entry_cparent']            = 'Parent Category:';
$_['button_enable']			   = 'Enable';
$_['button_disable']		   = 'Disable';
$_['button_reload'] 		   = 'Reload';
$_['entry_keyword']            = 'SEO Keyword:';
$_['entry_top']           	   = 'Top:';
$_['entry_column']             = 'Columns:';
// Admin Enhanced
			]]></add>
		</operation>		
	</file>

<!-- Controller Files -->	
	<file name="admin/controller/catalog/*.php">
		<operation error="log">
			<search position="after" index="2"><![CDATA[$this->data['error_warning'] = '';]]></search>
			<add><![CDATA[} 
				if (isset($this->session->data['success'])) {
					$this->data['success'] = $this->session->data['success'];
					unset($this->session->data['success']);
				} else {
					$this->data['success'] = '';
			]]></add>
		</operation>
	</file>

	<file name="admin/controller/setting/setting.php">
        <operation>
            <search position="after"><![CDATA[
		$this->data['entry_google_analytics'] = $this->language->get('entry_google_analytics');
            ]]></search>
            <add><![CDATA[
		// Admin Enhanced
		$this->data['text_edash']  		 = $this->language->get('text_edash');
		$this->data['text_eprod']  		 = $this->language->get('text_eprod');
		$this->data['text_ecats']  		 = $this->language->get('text_ecats');
		$this->data['text_emisc']  		 = $this->language->get('text_emisc');
		$this->data['entry_edate'] 		 = $this->language->get('entry_edate');
		$this->data['entry_eqick'] 		 = $this->language->get('entry_eqick');
		$this->data['entry_estat'] 		 = $this->language->get('entry_estat');
		$this->data['entry_etabs'] 		 = $this->language->get('entry_etabs');
		$this->data['entry_egana'] 		 = $this->language->get('entry_egana');
		$this->data['entry_eapi_key']    = $this->language->get('entry_eapi_key');
		$this->data['entry_eprofile_id'] = $this->language->get('entry_eprofile_id');
		$this->data['entry_eprod1']  	 = $this->language->get('entry_eprod1');
		$this->data['entry_eprod2']  	 = $this->language->get('entry_eprod2');
		$this->data['entry_eprod3']  	 = $this->language->get('entry_eprod3');
		$this->data['entry_eprod4']  	 = $this->language->get('entry_eprod4');
		$this->data['entry_eprod7']  	 = $this->language->get('entry_eprod7');
		$this->data['entry_eprod9']  	 = $this->language->get('entry_eprod9');
		$this->data['entry_ecats']  	 = $this->language->get('entry_ecats');
		$this->data['entry_ecats1']  	 = $this->language->get('entry_ecats1');
		$this->data['entry_ecats2']  	 = $this->language->get('entry_ecats2');
		$this->data['entry_ecats4']  	 = $this->language->get('entry_ecats4');
		$this->data['entry_ecats5']  	 = $this->language->get('entry_ecats5');
		$this->data['entry_ecats7']  	 = $this->language->get('entry_ecats7');
		$this->data['entry_emisc1']  	 = $this->language->get('entry_emisc1');
		$this->data['entry_emisc3']  	 = $this->language->get('entry_emisc3');
		$this->data['entry_emisc4']  	 = $this->language->get('entry_emisc4');
		$this->data['entry_emisc5']  	 = $this->language->get('entry_emisc5');
		$this->data['entry_emisc6']  	 = $this->language->get('entry_emisc6');
		// Admin Enhanced
            ]]></add>
        </operation>
		<operation>
            <search position="after"><![CDATA[
		$this->data['tab_server'] = $this->language->get('tab_server');
            ]]></search>
            <add><![CDATA[
		// Admin Enhanced
		$this->data['tab_enhanced'] = $this->language->get('tab_enhanced');
		$this->data['tab_dashboard'] = $this->language->get('tab_dashboard');
		$this->data['tab_products'] = $this->language->get('tab_products');
		$this->data['tab_categories'] = $this->language->get('tab_categories');
		$this->data['tab_customers'] = $this->language->get('tab_customers');
		$this->data['tab_orders'] = $this->language->get('tab_orders');
		$this->data['tab_other'] = $this->language->get('tab_other');
		$this->data['emisc5'] = $this->config->get('config_emisc5');
		$this->data['emisc6'] = $this->config->get('config_emisc6');
		// Admin Enhanced
            ]]></add>
        </operation>
		<operation>
            <search position="before"><![CDATA[
		if (isset($this->request->post['config_google_analytics'])) {
            ]]></search>
            <add><![CDATA[
		// Admin Enhanced
		if (isset($this->request->post['config_edate'])) {
			$this->data['config_edate'] = $this->request->post['config_edate']; 
		} else {
			$this->data['config_edate'] = $this->config->get('config_edate');
		}
		
		if (isset($this->request->post['config_eqick'])) {
			$this->data['config_eqick'] = $this->request->post['config_eqick']; 
		} else {
			$this->data['config_eqick'] = $this->config->get('config_eqick');
		}
		
		if (isset($this->request->post['config_estat'])) {
			$this->data['config_estat'] = $this->request->post['config_estat']; 
		} else {
			$this->data['config_estat'] = $this->config->get('config_estat');
		}
		
		if (isset($this->request->post['config_etabs'])) {
			$this->data['config_etabs'] = $this->request->post['config_etabs']; 
		} else {
			$this->data['config_etabs'] = $this->config->get('config_etabs');
		}
		
		if (isset($this->request->post['config_egana'])) {
			$this->data['config_egana'] = $this->request->post['config_egana']; 
		} else {
			$this->data['config_egana'] = $this->config->get('config_egana');
		}
		
		if (isset($this->request->post['config_eapi_key'])) {
			$this->data['config_eapi_key'] = $this->request->post['config_eapi_key']; 
		} else {
			$this->data['config_eapi_key'] = $this->config->get('config_eapi_key');
		}
		
		if (isset($this->request->post['config_eprofile_id'])) {
			$this->data['config_eprofile_id'] = $this->request->post['config_eprofile_id']; 
		} else {
			$this->data['config_eprofile_id'] = $this->config->get('config_eprofile_id');
		}
		
		if (isset($this->request->post['config_eprod1'])) {
			$this->data['config_eprod1'] = $this->request->post['config_eprod1']; 
		} else {
			$this->data['config_eprod1'] = $this->config->get('config_eprod1');
		}
		
		if (isset($this->request->post['config_eprod2'])) {
			$this->data['config_eprod2'] = $this->request->post['config_eprod2']; 
		} else {
			$this->data['config_eprod2'] = $this->config->get('config_eprod2');
		}
		
		if (isset($this->request->post['config_eprod3'])) {
			$this->data['config_eprod3'] = $this->request->post['config_eprod3']; 
		} else {
			$this->data['config_eprod3'] = $this->config->get('config_eprod3');
		}
		
		if (isset($this->request->post['config_eprod4'])) {
			$this->data['config_eprod4'] = $this->request->post['config_eprod4']; 
		} else {
			$this->data['config_eprod4'] = $this->config->get('config_eprod4');
		}
		
		if (isset($this->request->post['config_eprod7'])) {
			$this->data['config_eprod7'] = $this->request->post['config_eprod7']; 
		} else {
			$this->data['config_eprod7'] = $this->config->get('config_eprod7');
		}
		
		if (isset($this->request->post['config_eprod9'])) {
			$this->data['config_eprod9'] = $this->request->post['config_eprod9']; 
		} else {
			$this->data['config_eprod9'] = $this->config->get('config_eprod9');
		}
		
		if (isset($this->request->post['config_ecats'])) {
			$this->data['config_ecats'] = $this->request->post['config_ecats']; 
		} else {
			$this->data['config_ecats'] = $this->config->get('config_ecats');
		}
		
		if (isset($this->request->post['config_ecats1'])) {
			$this->data['config_ecats1'] = $this->request->post['config_ecats1']; 
		} else {
			$this->data['config_ecats1'] = $this->config->get('config_ecats1');
		}
		
		if (isset($this->request->post['config_ecats2'])) {
			$this->data['config_ecats2'] = $this->request->post['config_ecats2']; 
		} else {
			$this->data['config_ecats2'] = $this->config->get('config_ecats2');
		}
		
		if (isset($this->request->post['config_ecats4'])) {
			$this->data['config_ecats4'] = $this->request->post['config_ecats4']; 
		} else {
			$this->data['config_ecats4'] = $this->config->get('config_ecats4');
		}
		
		if (isset($this->request->post['config_ecats5'])) {
			$this->data['config_ecats5'] = $this->request->post['config_ecats5']; 
		} else {
			$this->data['config_ecats5'] = $this->config->get('config_ecats5');
		}
		
		if (isset($this->request->post['config_ecats7'])) {
			$this->data['config_ecats7'] = $this->request->post['config_ecats7']; 
		} else {
			$this->data['config_ecats7'] = $this->config->get('config_ecats7');
		}
		
		if (isset($this->request->post['config_emisc1'])) {
			$this->data['config_emisc1'] = $this->request->post['config_emisc1']; 
		} else {
			$this->data['config_emisc1'] = $this->config->get('config_emisc1');
		}
		
		if (isset($this->request->post['config_emisc3'])) {
			$this->data['config_emisc3'] = $this->request->post['config_emisc3']; 
		} else {
			$this->data['config_emisc3'] = $this->config->get('config_emisc3');
		}
		
		if (isset($this->request->post['config_emisc4'])) {
			$this->data['config_emisc4'] = $this->request->post['config_emisc4']; 
		} else {
			$this->data['config_emisc4'] = $this->config->get('config_emisc4');
		}
		
		if (isset($this->request->post['config_emisc5'])) {
			$this->data['config_emisc5'] = $this->request->post['config_emisc5']; 
		} else {
			$this->data['config_emisc5'] = $this->config->get('config_emisc5');
		}
		
		if (isset($this->request->post['config_emisc6'])) {
			$this->data['config_emisc6'] = $this->request->post['config_emisc6']; 
		} else {
			$this->data['config_emisc6'] = $this->config->get('config_emisc6');
		}
		// Admin Enhanced
            ]]></add>
        </operation>
    </file>
	
	<file name="admin/controller/setting/store.php">
		<operation>
			<search position="after"><![CDATA[$this->data['entry_ssl'] = $this->language->get('entry_ssl');]]></search>
			<add><![CDATA[
// Admin Enhanced
$this->data['entry_eapi_key']    = $this->language->get('entry_eapi_key');
$this->data['entry_eprofile_id'] = $this->language->get('entry_eprofile_id');
// Admin Enhanced
]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA[$this->template = 'setting/store_form.tpl';]]></search>
			<add><![CDATA[
		// Admin Enhanced
		if (isset($this->request->post['config_eapi_key'])) {
			$this->data['config_eapi_key'] = $this->request->post['config_eapi_key'];
		} elseif (isset($store_info['config_eapi_key'])) {
			$this->data['config_eapi_key'] = $store_info['config_eapi_key'];
		} else {
			$this->data['config_eapi_key'] = '';
		}
		if (isset($this->request->post['config_eprofile_id'])) {
			$this->data['config_eprofile_id'] = $this->request->post['config_eprofile_id'];
		} elseif (isset($store_info['config_eprofile_id'])) {
			$this->data['config_eprofile_id'] = $store_info['config_eprofile_id'];
		} else {
			$this->data['config_eprofile_id'] = '';
		}  
		// Admin Enhanced  
			]]></add>
		</operation>    
	</file>

	<file name="admin/controller/common/header.php">
		<operation>
      		<search position="after"><![CDATA[$this->data['text_zone'] = $this->language->get('text_zone');]]></search>
		<add>
        <![CDATA[
		// Admin Enhanced
		$this->data['edate'] = $this->config->get('config_edate');
		$this->data['egana'] = $this->config->get('config_egana');
		$this->data['eprod7'] = $this->config->get('config_eprod7');
		$this->data['ecats4'] = $this->config->get('config_ecats4');
		$this->data['emisc1'] = $this->config->get('config_emisc1');
		$this->data['emisc4'] = $this->config->get('config_emisc4');
		$this->data['emisc6'] = $this->config->get('config_emisc6');
		$this->data['text_january'] = $this->language->get('text_january');
		$this->data['text_february'] = $this->language->get('text_february');
		$this->data['text_march'] = $this->language->get('text_march');
		$this->data['text_april'] = $this->language->get('text_april');
		$this->data['text_may'] = $this->language->get('text_may');
		$this->data['text_june'] = $this->language->get('text_june');
		$this->data['text_july'] = $this->language->get('text_july');
		$this->data['text_august'] = $this->language->get('text_august');
		$this->data['text_september'] = $this->language->get('text_september');
		$this->data['text_october'] = $this->language->get('text_october');
		$this->data['text_november'] = $this->language->get('text_november');
		$this->data['text_december'] = $this->language->get('text_december');
		$this->data['text_year'] = $this->language->get('text_year');
		// Admin Enhanced
		]]>
      	</add>
    	</operation>
		<operation>
      		<search position="before">
		<![CDATA[
			$this->data['stores'] = array();		
		]]>	
			</search>
		<add>
        <![CDATA[
		// Admin Enhanced
		$this->data['edate'] = $this->config->get('config_edate');
		$this->data['egana'] = $this->config->get('config_egana');
		$this->data['eprod7'] = $this->config->get('config_eprod7');
		$this->data['ecats4'] = $this->config->get('config_ecats4');
		$this->data['emisc1'] = $this->config->get('config_emisc1');
		$this->data['emisc4'] = $this->config->get('config_emisc4');
		$this->data['emisc6'] = $this->config->get('config_emisc6');
		$this->data['text_january'] = $this->language->get('text_january');
		$this->data['text_february'] = $this->language->get('text_february');
		$this->data['text_march'] = $this->language->get('text_march');
		$this->data['text_april'] = $this->language->get('text_april');
		$this->data['text_may'] = $this->language->get('text_may');
		$this->data['text_june'] = $this->language->get('text_june');
		$this->data['text_july'] = $this->language->get('text_july');
		$this->data['text_august'] = $this->language->get('text_august');
		$this->data['text_september'] = $this->language->get('text_september');
		$this->data['text_october'] = $this->language->get('text_october');
		$this->data['text_november'] = $this->language->get('text_november');
		$this->data['text_december'] = $this->language->get('text_december');
		$this->data['text_year'] = $this->language->get('text_year');
		// Admin Enhanced
		]]>
      	</add>
    	</operation>
	</file>
	
	<file name="admin/controller/common/home.php">
        <operation>
      		<search position="after">
        <![CDATA[$this->document->setTitle($this->language->get('heading_title'));]]>
      		</search>
      	<add>
        <![CDATA[
		// Admin Enhanced
		$this->language->load('common/eadmin_shortcuts');
		$url = '';
		$this->data['text_eadmin_products'] = $this->language->get('text_eadmin_products');
		$this->data['eadmin_products'] = $this->url->link('catalog/product', 'token=' . $this->session->data['token'] . $url, 'SSL');
		$this->data['text_eadmin_categories'] = $this->language->get('text_eadmin_categories');
		$this->data['eadmin_categories'] = $this->url->link('catalog/category', 'token=' . $this->session->data['token'] . $url, 'SSL');
		$this->data['text_eadmin_manufacturer'] = $this->language->get('text_eadmin_manufacturer');
		$this->data['eadmin_manufacturer'] = $this->url->link('catalog/manufacturer', 'token=' . $this->session->data['token'] . $url, 'SSL');
		$this->data['text_eadmin_information'] = $this->language->get('text_eadmin_information');
		$this->data['eadmin_information'] = $this->url->link('catalog/information', 'token=' . $this->session->data['token'] . $url, 'SSL');
		$this->data['text_eadmin_mail'] = $this->language->get('text_eadmin_mail');
		$this->data['eadmin_mail'] = $this->url->link('sale/contact', 'token=' . $this->session->data['token'] . $url, 'SSL');		
		$this->data['text_eadmin_orders'] = $this->language->get('text_eadmin_orders');
		$this->data['eadmin_orders'] = $this->url->link('sale/order', 'token=' . $this->session->data['token'] . $url, 'SSL');
		$this->data['text_eadmin_returns'] = $this->language->get('text_eadmin_returns');
		$this->data['eadmin_returns'] = $this->url->link('sale/return', 'token=' . $this->session->data['token'] . $url, 'SSL');
		$this->data['text_eadmin_customers'] = $this->language->get('text_eadmin_customers');
		$this->data['eadmin_customers'] = $this->url->link('sale/customer', 'token=' . $this->session->data['token'] . $url, 'SSL');		
		$this->data['text_eadmin_purchased'] = $this->language->get('text_eadmin_purchased');
		$this->data['eadmin_purchased'] = $this->url->link('report/product_purchased', 'token=' . $this->session->data['token'] . $url, 'SSL');
		// Admin Enhanced
		]]>
      	</add>
    	</operation>
		<operation>
            <search position="before"><![CDATA[
		$this->template = 'common/home.tpl';
            ]]></search>
            <add><![CDATA[
		// Admin Enhanced
		$this->data['eqick'] = $this->config->get('config_eqick');
		$this->data['estat'] = $this->config->get('config_estat');
		$this->data['egana'] = $this->config->get('config_egana');
		$this->data['etabs'] = $this->config->get('config_etabs');
		$this->data['config_eapi_key']    = $this->config->get('config_eapi_key');
		$this->data['config_eprofile_id'] = $this->config->get('config_eprofile_id');
		$this->data['text_ga_summary']   = $this->language->get('text_ga_summary');
		$this->data['text_ga_visits']    = $this->language->get('text_ga_visits');
		$this->data['text_ga_visitors']  = $this->language->get('text_ga_visitors');
		$this->data['text_ga_pageviews'] = $this->language->get('text_ga_pageviews');
		// Admin Enhanced
            ]]></add>
        </operation>
    	<operation error="log">
      		<search position="after"><![CDATA[
      	$this->data['column_action'] = $this->language->get('column_action');
      ]]></search>
      		<add><![CDATA[
        // Admin Enhanced
		$this->data['text_latest'] = $this->language->get('text_latest');
        $this->data['tab_order'] = $this->language->get('tab_order');
        $this->data['tab_customer'] = $this->language->get('tab_customer');
        $this->data['tab_review'] = $this->language->get('tab_review');
        $this->data['tab_return'] = $this->language->get('tab_return');
		$this->data['column_name'] = $this->language->get('column_name');
		$this->data['column_email'] = $this->language->get('column_email');
		$this->data['column_customer_group'] = $this->language->get('column_customer_group');
		$this->data['column_product'] = $this->language->get('column_product');
		$this->data['column_author'] = $this->language->get('column_author');
		$this->data['column_rating'] = $this->language->get('column_rating');
		$this->data['column_return_id'] = $this->language->get('column_return_id');
		$this->data['column_order_id'] = $this->language->get('column_order_id');
		$this->data['column_customer'] = $this->language->get('column_customer');
		$this->data['column_product'] = $this->language->get('column_product');
		$this->data['column_model'] = $this->language->get('column_model');
		// Admin Enhanced
      ]]></add>
    	</operation>
		<operation error="log">
      		<search position="before"><![CDATA[
      if ($this->config->get('config_currency_auto')) {
      ]]></search>
      		<add><![CDATA[
		// Admin Enhanced
		$this->data['customers'] = array(); 
		
		$data = array(
			'sort'  => 'c.date_added',
			'order' => 'DESC',
			'start' => 0,
			'limit' => 10
		);

		$customer_results = $this->model_sale_customer->getCustomers($data);
 
    	foreach ($customer_results as $customer_result) {
			$action = array();
		
			$action[] = array(
				'text' => $this->language->get('text_edit'),
				'href' => $this->url->link('sale/customer/update', 'token=' . $this->session->data['token'] . '&customer_id=' . $customer_result['customer_id'] . $url, 'SSL')
			);
			
			$this->data['customers'][] = array(
				'customer_id'    => $customer_result['customer_id'],
				'name'           => $customer_result['name'],
				'email'          => $customer_result['email'],
				'customer_group' => $customer_result['customer_group'],
				'status'         => ($customer_result['status'] ? $this->language->get('text_enabled') : $this->language->get('text_disabled')),
				'approved'       => ($customer_result['approved'] ? $this->language->get('text_yes') : $this->language->get('text_no')),
				'ip'             => $customer_result['ip'],
				'date_added'     => date($this->language->get('date_format_short'), strtotime($customer_result['date_added'])),
				'selected'       => isset($this->request->post['selected']) && in_array($customer_result['customer_id'], $this->request->post['selected']),
				'action'         => $action
			);
		}	

		$this->data['reviews'] = array(); 
		
		$data = array(
			'sort'  => 'r.date_added',
			'order' => 'DESC',
			'start' => 0,
			'limit' => 10
		);

		$review_results = $this->model_catalog_review->getReviews($data);
 
    	foreach ($review_results as $review_result) {
			$action = array();
						
			$action[] = array(
				'text' => $this->language->get('text_edit'),
				'href' => $this->url->link('catalog/review/update', 'token=' . $this->session->data['token'] . '&review_id=' . $review_result['review_id'] . $url, 'SSL')
			);
						
			$this->data['reviews'][] = array(
				'review_id'  => $review_result['review_id'],
				'name'       => $review_result['name'],
				'author'     => $review_result['author'],
				'rating'     => $review_result['rating'],
				'status'     => ($review_result['status'] ? $this->language->get('text_enabled') : $this->language->get('text_disabled')),
				'date_added' => date($this->language->get('date_format_short'), strtotime($review_result['date_added'])),
				'selected'   => isset($this->request->post['selected']) && in_array($review_result['review_id'], $this->request->post['selected']),
				'action'     => $action
			);
		}	
        
        $this->load->model('sale/return');
        
		$this->data['returns'] = array(); 
		
		$data = array(
			'sort'  => 'r.date_added',
			'order' => 'DESC',
			'start' => 0,
			'limit' => 10
		);

		$return_results = $this->model_sale_return->getReturns($data);
 
    	foreach ($return_results as $return_result) {
			$action = array();
			
			$action[] = array(
				'text' => $this->language->get('text_view'),
				'href' => $this->url->link('sale/return/info', 'token=' . $this->session->data['token'] . '&return_id=' . $return_result['return_id'] . $url, 'SSL')
			);
					
			$action[] = array(
				'text' => $this->language->get('text_edit'),
				'href' => $this->url->link('sale/return/update', 'token=' . $this->session->data['token'] . '&return_id=' . $return_result['return_id'] . $url, 'SSL')
			);
						
			$this->data['returns'][] = array(
				'return_id'     => $return_result['return_id'],
				'order_id'      => $return_result['order_id'],
				'customer'      => $return_result['customer'],
				'product'       => $return_result['product'],
				'model'         => $return_result['model'],
				'status'        => $return_result['status'],
				'date_added'    => date($this->language->get('date_format_short'), strtotime($return_result['date_added'])),	
				'date_modified' => date($this->language->get('date_format_short'), strtotime($return_result['date_modified'])),				
				'selected'      => isset($this->request->post['selected']) && in_array($return_result['return_id'], $this->request->post['selected']),
				'action'        => $action
			);
		}
		// Admin Enhanced	
     ]]></add>
    	</operation>
    </file>
	
	<file name="admin/controller/catalog/product.php">		
		<operation error="abort">
			<search position="before" index="1" ><![CDATA[$this->data['products'][] = array(]]></search>
			<add><![CDATA[ 
                $manufacturer = $this->model_catalog_manufacturer->getManufacturer($result['manufacturer_id']);
            ]]></add>
        </operation>
        <operation error="abort">
			<search position="after" index="1" ><![CDATA[$this->data['products'][] = array(]]></search>
			<add><![CDATA[ 
               'categories' => $this->model_catalog_product->getProductCategories($result['product_id']),
               'manufacturer_name' => $manufacturer ? $manufacturer['name'] : '- - -',
               'manufacturer_id' => $result['manufacturer_id'],
            ]]></add>
        </operation>
		<operation>
            <search position="after" ><![CDATA[$url = '';]]></search>
			<add><![CDATA[                
		if (isset($this->request->get['filter_category_id'])) {
			$url .= '&filter_category_id=' . $this->request->get['filter_category_id'];
		}
		if (isset($this->request->get['filter_manufacturer'])) {
			$url .= '&filter_manufacturer=' . $this->request->get['filter_manufacturer'];
		}
		if (isset($this->request->get['filter_order'])) {
			$url .= '&filter_order=' . (int)$this->request->get['filter_order'];
		}]]>
            </add>
	  </operation>
		<operation>
			<search position="after" index="1"><![CDATA[function getList() {]]></search>
			<add><![CDATA[
                $this->load->model('catalog/manufacturer');
                $this->load->model('catalog/category');

                if (isset($this->request->get['filter_category_id'])) {
                    $filter_category_id = $this->request->get['filter_category_id'];
                } else {
                    $filter_category_id = null;
                }

                if (isset($this->request->get['filter_manufacturer_id'])) {
                    $filter_manufacturer_id = $this->request->get['filter_manufacturer_id'];
                } else {
                    $filter_manufacturer_id = null;
                }

                if (isset($this->request->get['filter_manufacturer'])) {
                    $filter_manufacturer = $this->request->get['filter_manufacturer'];
                } else {
                    $filter_manufacturer = null;
                }
				
				if (isset($this->request->get['filter_order'])) {
                    $filter_order = $this->request->get['filter_order'];
                } else {
                    $filter_order = null;
                }

                $url = '';
            ]]></add>
		</operation>
		<operation>
			<search position="before" index="1"><![CDATA[$this->model_catalog_product->getTotalProducts($data)]]></search>
			<add><![CDATA[
                $data['filter_category_id'] = $filter_category_id;
				$data['filter_manufacturer'] = $filter_manufacturer;
                $data['filter_order'] = $filter_order;
			]]></add>
		</operation>
		<operation>
			<search position="after" index="1"><![CDATA[$this->data['pagination'] = $pagination->render();]]></search>
			<add><![CDATA[
            $this->data['categories'] = $this->model_catalog_category->getCategories(0);
            $this->data['filter_category_id'] = $filter_category_id;
            $this->data['filter_manufacturer'] = $filter_manufacturer;
			$this->data['filter_order'] = $filter_order;
                
            $this->data['manufacturers'] = $this->model_catalog_manufacturer->getManufacturers(array('sort' =>'name'));

			]]></add>
		</operation>
		<operation>
			<search position="after"><![CDATA[$this->data['delete'] = $this->url->link('catalog/product/delete', 'token=' . $this->session->data['token'] . $url, 'SSL');]]></search>
			<add><![CDATA[
	$this->data['store'] = HTTP_CATALOG;
    $this->data['stores'] = array();

    $this->load->model('setting/store');

    $results = $this->model_setting_store->getStores();

      foreach ($results as $result) {
      $this->data['stores'][] = array(
      'name' => $result['name'],
      'id' => $result['store_id'],
      'href' => $result['url']);
      }			
			]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA['action'     => $action]]></search>
			<add><![CDATA['filter_order' => $filter_order,
			'sort_order'  => $result['sort_order'],]]></add>
		</operation>
		<operation error="abort">
			<search position="after" index="1" ><![CDATA[$product_specials = $this->model_catalog_product->getProductSpecials($result['product_id']);]]></search>
			<add><![CDATA[ 
                $this->load->model('catalog/product');
                $product_id = $result['product_id'];
                $this->data['product_description'][$product_id] = $this->model_catalog_product->getProductDescriptions($result['product_id']);
            ]]></add>
        </operation>
		<operation>
            <search position="before"><![CDATA[
    	if (isset($this->request->post['shipping'])) {
            ]]></search>
            <add><![CDATA[
		$this->load->model('catalog/manufacturer');
		
    	$this->data['manufacturers'] = $this->model_catalog_manufacturer->getManufacturers();

    	if (isset($this->request->post['manufacturer_id'])) {
      		$this->data['manufacturer_id'] = $this->request->post['manufacturer_id'];
		} elseif (!empty($product_info)) {
			$this->data['manufacturer_id'] = $product_info['manufacturer_id'];
		} else {
      		$this->data['manufacturer_id'] = 0;
    	} 		
		
		$this->load->model('catalog/category');
		$this->data['categories'] = $this->model_catalog_category->getCategoriesNonAuto();

		if (isset($this->request->post['product_category'])) {
			$this->data['product_category'] = $this->request->post['product_category'];
		} elseif (isset($this->request->get['product_id'])) {
			$this->data['product_category'] = $this->model_catalog_product->getProductCategories($this->request->get['product_id']);
		} else {
			$this->data['product_category'] = array();
		}
		]]></add>
        </operation>
		<operation>
			<search position="before"><![CDATA[
				public function autocomplete() {
				]]></search>
			<add><![CDATA[
				// Admin Enhanced
	public function category() {
		$json = array();
				
		$this->load->model('catalog/product');
							
		if (isset($this->request->get['category_id'])) {
			$category_id = $this->request->get['category_id'];
		} else {
			$category_id = 0;
		}
							
		$results = $this->model_catalog_product->getProductsByCategoryId($category_id);
							
		foreach ($results as $result) {
			$json[] = array(
				'product_id' => $result['product_id'],
				'name'       => $result['name'],
				'model'      => $result['model']
			);
		}
							
		$this->response->setOutput(json_encode($json));
	}

	public function related() {
		$json = array();

		$this->load->model('catalog/product');
							
		if (isset($this->request->post['product_related'])) {
			$products = $this->request->post['product_related'];
		} else {
			$products = array();
		}
							
		foreach ($products as $product_id) {
			$product_info = $this->model_catalog_product->getProduct($product_id);
							
			if ($product_info) {
				$json[] = array(
					'product_id' => $product_info['product_id'],
					'name'       => $product_info['name'],
					'model'      => $product_info['model']
				);
			}
		}
							
		$this->response->setOutput(json_encode($json));
	}
				// Admin Enhanced
				]]></add>
		</operation>
		<operation>
			<search position="after"><![CDATA[
				'status'     => ($result['status'] ? $this->language->get('text_enabled') : $this->language->get('text_disabled')),
				]]></search>
			<add><![CDATA[
				// Admin Enhanced
				'status2'     => ($result['status'] ? $this->language->get('text_enabled2') : $this->language->get('text_disabled2')),
				// Admin Enhanced
				]]></add>
		</operation>
		<operation error="log">
			<search position="after" >
			<![CDATA[
            $this->data['tab_design'] = $this->language->get('tab_design');			
			]]></search> 
			<add><![CDATA[
			// Admin Enhanced
			$this->data['tab_seo'] = $this->language->get('tab_seo');
			$this->data['eprod3'] = $this->config->get('config_eprod3');
			$this->data['eprod9'] = $this->config->get('config_eprod9');
			$this->data['entry_manufacturer'] = $this->language->get('entry_manufacturer');
			$this->data['entry_category'] = $this->language->get('entry_category');
			$this->data['entry_related'] = $this->language->get('entry_related');
			$this->data['text_select_all'] = $this->language->get('text_select_all');
			$this->data['text_unselect_all'] = $this->language->get('text_unselect_all');
			// Admin Enhanced
			]]></add>
		</operation>
		<operation error="log">
			<search position="after" >
			<![CDATA[
		$this->data['button_filter'] = $this->language->get('button_filter');			
			]]></search> 
			<add><![CDATA[
			// Admin Enhanced
			$this->data['button_clear_filters'] = $this->language->get('button_clear_filters');
			$this->data['button_enable'] = $this->language->get('button_enable');
			$this->data['button_disable'] = $this->language->get('button_disable');
			$this->data['text_enabled2'] = $this->language->get('text_enabled2');
			$this->data['text_disabled2'] = $this->language->get('text_disabled2');
			$this->data['text_esave'] = $this->language->get('text_esave');
			$this->data['text_ecancel'] = $this->language->get('text_ecancel');
			$this->data['text_ecfilter'] = $this->language->get('text_ecfilter');
			$this->data['text_eallcats'] = $this->language->get('text_eallcats');
			$this->data['text_emfilter'] = $this->language->get('text_emfilter');
			$this->data['text_eallmanu'] = $this->language->get('text_eallmanu');
			$this->data['text_img_remove'] = $this->language->get('text_img_remove');
			$this->data['text_img_edit'] = $this->language->get('text_img_edit');
			$this->data['text_esave'] = $this->language->get('text_esave');
			$this->data['text_imgsaved'] = $this->language->get('text_imgsaved');
			$this->data['text_namsaved'] = $this->language->get('text_namsaved');
			$this->data['text_modsaved'] = $this->language->get('text_modsaved');
			$this->data['text_prcsaved'] = $this->language->get('text_prcsaved');
			$this->data['text_spcsaved'] = $this->language->get('text_spcsaved');
			$this->data['text_qtysaved'] = $this->language->get('text_qtysaved');
			$this->data['text_stasaved'] = $this->language->get('text_stasaved');
			$this->data['text_ordsaved'] = $this->language->get('text_ordsaved');
			$this->data['text_eedit'] = $this->language->get('text_eedit');
			$this->data['text_eview'] = $this->language->get('text_eview');
			$this->data['eprod1'] = $this->config->get('config_eprod1');
			$this->data['eprod2'] = $this->config->get('config_eprod2');
			$this->data['eprod4'] = $this->config->get('config_eprod4');
			$this->data['eprod7'] = $this->config->get('config_eprod7');
			$this->data['emisc3'] = $this->config->get('config_emisc3');
			$this->data['emisc6'] = $this->config->get('config_emisc6');
			$this->data['text_sort_order'] = $this->language->get('text_sort_order');
			// Admin Enhanced
			]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA[		$this->data['insert'] = $this->url->link('catalog/product/insert', 'token=' . $this->session->data['token'] . $url, 'SSL');]]></search>
			<add><![CDATA[
			// Admin Enhanced
			$this->data['enable'] = $this->url->link('catalog/product/enable', 'token=' . $this->session->data['token'] . $url, 'SSL');
			$this->data['disable'] = $this->url->link('catalog/product/disable', 'token=' . $this->session->data['token'] . $url, 'SSL');
			// Admin Enhanced
			]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA[
			protected function getList() {
			]]></search>
			<add><![CDATA[
			// Admin Enhanced
			public function enable() {
				  $this->language->load('catalog/product');
				  
				  $this->document->setTitle($this->language->get('heading_title'));
				  
				  $this->load->model('catalog/product');
				  
				  if (!$this->user->hasPermission('modify', 'catalog/product')) {
					  $this->error['warning'] = $this->language->get('error_permission');
				  } elseif (isset($this->request->post['selected'])) {
					  $enabled_count = 0;
					  
					  foreach ($this->request->post['selected'] as $product_id) {
						  $product_info = $this->model_catalog_product->getProduct($product_id);
						  
						  if ($product_info && !$product_info['status']) {
							  $this->model_catalog_product->enableProduct($product_id);
							  
							  $enabled_count++;
						  }
					  } 
					  
					  $this->session->data['success'] = sprintf($this->language->get('text_product_enabled'), $enabled_count);	
					  
					  $url = '';
					
			if (isset($this->request->get['filter_category_id'])) {
				$url .= '&filter_category_id=' . $this->request->get['filter_category_id'];
			}
			
			if (isset($this->request->get['filter_manufacturer_id'])) {
				$url .= '&filter_manufacturer_id=' . $this->request->get['filter_manufacturer_id'];
			}
			
			if (isset($this->request->get['filter_manufacturer'])) {
				$url .= '&filter_manufacturer=' . urlencode(html_entity_decode($this->request->get['filter_manufacturer'], ENT_QUOTES, 'UTF-8'));
			}
			
			if (isset($this->request->get['filter_order'])) {
				$url .= '&filter_order=' . (int)$this->request->get['filter_order'];
			}
			
			if (isset($this->request->get['filter_name'])) {
				$url .= '&filter_name=' . urlencode(html_entity_decode($this->request->get['filter_name'], ENT_QUOTES, 'UTF-8'));
			}
					  
			if (isset($this->request->get['filter_model'])) {
				$url .= '&filter_model=' . urlencode(html_entity_decode($this->request->get['filter_model'], ENT_QUOTES, 'UTF-8'));
			}
					  
			if (isset($this->request->get['filter_price'])) {
				$url .= '&filter_price=' . $this->request->get['filter_price'];
			}
					  
			if (isset($this->request->get['filter_quantity'])) {
				$url .= '&filter_quantity=' . $this->request->get['filter_quantity'];
			}	
					  
			if (isset($this->request->get['filter_status'])) {
				$url .= '&filter_status=' . $this->request->get['filter_status'];
			}
							  
			if (isset($this->request->get['sort'])) {
				$url .= '&sort=' . $this->request->get['sort'];
			}
		  
			if (isset($this->request->get['order'])) {
				$url .= '&order=' . $this->request->get['order'];
			}
		  
			if (isset($this->request->get['page'])) {
				$url .= '&page=' . $this->request->get['page'];
			}
									
					  $this->redirect($this->url->link('catalog/product', 'token=' . $this->session->data['token'] . $url, 'SSL'));			
				  }
				  
				  $this->getList();
			  }

			public function disable() {
				  $this->language->load('catalog/product');
				  
				  $this->document->setTitle($this->language->get('heading_title'));
				  
				  $this->load->model('catalog/product');
				  
				  if (!$this->user->hasPermission('modify', 'catalog/product')) {
					  $this->error['warning'] = $this->language->get('error_permission');
				  } elseif (isset($this->request->post['selected'])) {
					  $disabled_count = 0;
					  
					  foreach ($this->request->post['selected'] as $product_id) {
						  $product_info = $this->model_catalog_product->getProduct($product_id);
						  
						  if ($product_info && $product_info['status']) {
							  $this->model_catalog_product->disableProduct($product_id);
							  
							  $disabled_count++;
						  }
					  } 
					  
					  $this->session->data['success'] = sprintf($this->language->get('text_product_disabled'), $disabled_count);	
					  
					  $url = '';
							
			if (isset($this->request->get['filter_category_id'])) {
				$url .= '&filter_category_id=' . $this->request->get['filter_category_id'];
			}
			
			if (isset($this->request->get['filter_manufacturer_id'])) {
				$url .= '&filter_manufacturer_id=' . $this->request->get['filter_manufacturer_id'];
			}
			
			if (isset($this->request->get['filter_manufacturer'])) {
				$url .= '&filter_manufacturer=' . urlencode(html_entity_decode($this->request->get['filter_manufacturer'], ENT_QUOTES, 'UTF-8'));
			}
			
			if (isset($this->request->get['filter_order'])) {
				$url .= '&filter_order=' . (int)$this->request->get['filter_order'];
			}
			
			if (isset($this->request->get['filter_name'])) {
				$url .= '&filter_name=' . urlencode(html_entity_decode($this->request->get['filter_name'], ENT_QUOTES, 'UTF-8'));
			}
					  
			if (isset($this->request->get['filter_model'])) {
				$url .= '&filter_model=' . urlencode(html_entity_decode($this->request->get['filter_model'], ENT_QUOTES, 'UTF-8'));
			}
					  
			if (isset($this->request->get['filter_price'])) {
				$url .= '&filter_price=' . $this->request->get['filter_price'];
			}
					  
			if (isset($this->request->get['filter_quantity'])) {
				$url .= '&filter_quantity=' . $this->request->get['filter_quantity'];
			}	
					  
			if (isset($this->request->get['filter_status'])) {
				$url .= '&filter_status=' . $this->request->get['filter_status'];
			}
							  
			if (isset($this->request->get['sort'])) {
				$url .= '&sort=' . $this->request->get['sort'];
			}
		  
			if (isset($this->request->get['order'])) {
				$url .= '&order=' . $this->request->get['order'];
			}
		  
			if (isset($this->request->get['page'])) {
				$url .= '&page=' . $this->request->get['page'];
			}
									
					  $this->redirect($this->url->link('catalog/product', 'token=' . $this->session->data['token'] . $url, 'SSL'));			
				  }
				  
				  $this->getList();
			  }
			  // Admin Enhanced
			]]></add>
		</operation>
		<operation>
			<search position="replace"><![CDATA['text' => $this->language->get('text_edit'),]]></search>
			<add><![CDATA['text' => $this->language->get('text_eedit'),]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA[
				public function insert()
			]]></search>
			<add><![CDATA[
				// Admin Enhanced
	public function setstatus() {
		$this->language->load('catalog/product');
		$this->load->model('catalog/product');
		$output='';
		if(isset($this->request->get['object_id'])){
			$requestpart = explode('-',$this->request->get['object_id']);
			if(count($requestpart)==2){
				$column_name = $requestpart[0];
				$product_id = $requestpart[1];				
				$result = $this->model_catalog_product->getProduct($product_id);
				if($result[$column_name]){
					$this->model_catalog_product->setStatus($product_id, $column_name, 0);
				} else {
					$this->model_catalog_product->setStatus($product_id, $column_name, 1);
				}
				$result = $this->model_catalog_product->getProduct($product_id);
				$output = $result[$column_name] ? $this->language->get('text_enabled2') : $this->language->get('text_disabled2');
			}
		}
		$this->response->setOutput($output);
	}
	// Admin Enhanced
			]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA[
  	protected function validateForm() {
				]]></search>
			<add><![CDATA[
	// Admin Enhanced
	public function saveImage() {
		$this->language->load('catalog/product');
		$this->load->model('catalog/product');				
		if (isset($this->request->get['image'])) {
        	$id = $this->request->get['product_id'];
        	$image = $this->request->get['image'];
			//$this->model_catalog_product->saveImage($id,$image);
			$this->session->data['success'] = $this->language->get('text_imgsaved');
		$this->response->setOutput($this->model_catalog_product->saveImage($id,$image));
		}
		$this->getList();
	}

	public function saveOrder() {
		$this->language->load('catalog/product');
		$this->load->model('catalog/product');				
		if (isset($this->request->get['sort_order'])) {
        	$id = $this->request->get['product_id'];
        	$sort = $this->request->get['sort_order'];
			$this->session->data['success'] = $this->language->get('text_ordsaved');
		$this->response->setOutput($this->model_catalog_product->saveOrder($id,$sort));
		}
		$this->getList();
	}
	
	public function saveName() {
        $this->language->load('catalog/product');
		$this->load->model('catalog/product');
		if (isset($this->request->get['name'])) {
			$id  = $this->request->get['product_id'];
        	$name = $this->request->get['name']; 
        	$this->model_catalog_product->saveName($id,$name);
			$this->session->data['success'] = $this->language->get('text_namsaved');
		}
		$this->getList();
    }
	
	public function saveModel() {
        $this->language->load('catalog/product');
		$this->load->model('catalog/product');
		if (isset($this->request->get['model'])) {
			$id  = $this->request->get['product_id'];
        	$model = $this->request->get['model']; 
        	$this->model_catalog_product->saveModel($id,$model);
			$this->session->data['success'] = $this->language->get('text_modsaved');
		}
		$this->getList();
    }

	public function savePrice() {
        $this->language->load('catalog/product');
		$this->load->model('catalog/product');
		if (isset($this->request->get['price'])) {
			$id  = $this->request->get['product_id'];
        	$price = $this->request->get['price']; 
        	$this->model_catalog_product->savePrice($id,$price);
			$this->session->data['success'] = $this->language->get('text_prcsaved');
		}
		$this->getList();
    }
	
	public function saveSpecial() {
        $this->language->load('catalog/product');
		$this->load->model('catalog/product');
		if (isset($this->request->get['special'])) {
			$id  = $this->request->get['product_id'];
        	$special = $this->request->get['special']; 
        	$this->model_catalog_product->saveSpecial($id,$special);
			$this->session->data['success'] = $this->language->get('text_spcsaved');
		}
		$this->getList();
    }
	
	public function saveQuantity() {
        $this->language->load('catalog/product');
		$this->load->model('catalog/product');
		if (isset($this->request->get['quantity'])) {
			$id  = $this->request->get['product_id'];
        	$quantity = $this->request->get['quantity']; 
        	$this->model_catalog_product->saveQuantity($id,$quantity);
			$this->session->data['success'] = $this->language->get('text_qtysaved');
		}
		$this->getList();
    }
	// Admin Enhanced
				]]></add>
		</operation>
		<operation error="log">
			<search position="replace" >
			<![CDATA[
		$this->template = 'catalog/product_form.tpl';			
			]]></search> 
			<add><![CDATA[
		// Admin Enhanced
		if ($this->config->get('config_eprod9') == 1) { 
		$this->template = 'catalog/product_enhanced_form.tpl';
		 } else { 
		$this->template = 'catalog/product_form.tpl';		
		 } 
		// Admin Enhanced
			]]></add>
		</operation>		
	</file>
	
	<file name="admin/controller/catalog/category.php">
		<operation>
			<search position="replace"><![CDATA['text' => $this->language->get('text_edit'),]]></search>
			<add><![CDATA['text' => $this->language->get('text_eedit'),]]></add>
		</operation>
		<operation>
	  		<search position="after"><![CDATA[$this->data['delete'] = $this->url->link('catalog/category/delete', 'token=' . $this->session->data['token'] . $url, 'SSL');]]></search>
      		<add><![CDATA[
    $this->data['csort'] = $this->url->link('catalog/category/sortable', 'token=' . $this->session->data['token'], 'SSL');
	
	$this->data['store'] = HTTP_CATALOG;
    $this->data['stores'] = array();

    $this->load->model('setting/store');

    $results = $this->model_setting_store->getStores();

      foreach ($results as $result) {
        $this->data['stores'][] = array(
        'name' => $result['name'],
        'id' => $result['store_id'],
        'href' => $result['url']);
      }
			]]></add>
    	</operation>
		<operation>
			<search position="before"><![CDATA[
				if (isset($this->request->post['parent_id'])) {
				]]></search>
			<add><![CDATA[
				$categories = $this->model_catalog_category->getCategories(0);					
				if (!empty($category_info)) {
					foreach ($categories as $key => $category) {
						if ($category['category_id'] == $category_info['category_id']) {
						unset($categories[$key]);
							}
						}
					}
					
				$this->data['categories'] = $categories;					
			]]></add>
		</operation>
		<operation>
            <search position="after"><![CDATA[protected function getList() {]]></search>
            <add><![CDATA[
    	$this->load->model('catalog/product');
		
		if (isset($this->request->get['filter_sort'])) {
			$filter_sort = $this->request->get['filter_sort'];
		} else {
			$filter_sort = null;
		}
		
		if (isset($this->request->get['filter_status'])) {
			$filter_status = $this->request->get['filter_status'];
		} else {
			$filter_status = null;
		}
		
		if (isset($this->request->get['sort'])) {
			$sort = $this->request->get['sort'];
		} else {
			$sort = 'c.sort_order, LCASE(cd2.name)';
		}

		if (isset($this->request->get['order'])) {
			$order = $this->request->get['order'];
		} else {
			$order = 'ASC';
		}                    
            ]]></add>
        </operation>
		<operation>
            <search position="after" index="1"><![CDATA[$url = '';]]></search>
            <add><![CDATA[
		if (isset($this->request->get['filter_sort'])) {
			$url .= '&filter_sort=' . $this->request->get['filter_sort'];
		}
		
		if (isset($this->request->get['filter_status'])) {
			$url .= '&filter_status=' . $this->request->get['filter_status'];
		}

		if (isset($this->request->get['sort'])) {
			$url .= '&sort=' . $this->request->get['sort'];
		}

		if (isset($this->request->get['order'])) {
			$url .= '&order=' . $this->request->get['order'];
		}                   
            ]]></add>
        </operation>
		<operation>
            <search position="before"><![CDATA['start' => ($page - 1) * $this->config->get('config_admin_limit'),]]></search>
            <add><![CDATA[
			'filter_sort'     => $filter_sort,
			'filter_status'   => $filter_status,
			'sort'  		  => $sort,
			'order'           => $order,                  
            ]]></add>
        </operation>
		<operation>
            <search position="before"><![CDATA[$pagination = new Pagination();]]></search>
            <add><![CDATA[
		$url = '';

		if (isset($this->request->get['filter_status'])) {
			$url .= '&filter_status=' . $this->request->get['filter_status'];
		}
		
		if (isset($this->request->get['filter_sort'])) {
			$url .= '&filter_sort=' . $this->request->get['filter_sort'];
		}
		
		if ($order == 'ASC') {
			$url .= '&order=DESC';
		} else {
			$url .= '&order=ASC';
		}

		if (isset($this->request->get['page'])) {
			$url .= '&page=' . $this->request->get['page'];
		}
		
		$this->data['sort_name'] = $this->url->link('catalog/category', 'token=' . $this->session->data['token'] . '&sort=name' . $url, 'SSL');
		$this->data['sort_order'] = $this->url->link('catalog/category', 'token=' . $this->session->data['token'] . '&sort=c.sort_order' . $url, 'SSL');
		$this->data['sort_status'] = $this->url->link('catalog/category', 'token=' . $this->session->data['token'] . '&sort=status' . $url, 'SSL');

		$url = '';
		
		if (isset($this->request->get['filter_sort'])) {
			$url .= '&filter_sort=' . $this->request->get['filter_sort'];
		}
		
		if (isset($this->request->get['filter_status'])) {
			$url .= '&filter_status=' . $this->request->get['filter_status'];
		}
		
		if (isset($this->request->get['sort'])) {
			$url .= '&sort=' . $this->request->get['sort'];
		}

		if (isset($this->request->get['order'])) {
			$url .= '&order=' . $this->request->get['order'];
		}                 
            ]]></add>
        </operation>
        <operation>
            <search position="after"><![CDATA[$this->data['pagination'] = $pagination->render();]]></search>
            <add><![CDATA[
		$this->data['filter_sort'] = $filter_sort;
		$this->data['filter_status'] = $filter_status;

		$this->data['sort'] = $sort;
		$this->data['order'] = $order;
            ]]></add>
        </operation>
		<operation>
            <search position="after"><![CDATA[$this->data['categories'][] = array(]]></search>
            <add><![CDATA[
        'href'        => $this->url->link('catalog/product', 'token=' . $this->session->data['token'] . '&filter_category_id=' . $result['category_id'] . $url, 'SSL'),
        'status'      => $result['status'],
        'total_products_1'   => $this->model_catalog_product->getTotalProducts( array('filter_category_id' => $result['category_id'], 'filter_status' => 1 ) ),             
        'total_products_all' => $this->model_catalog_product->getTotalProducts( array('filter_category_id' => $result['category_id'] ) ),
            ]]></add>
        </operation>
		<operation error="log">
			<search position="before"><![CDATA['sort_order'  => $result['sort_order'],]]></search>
			<add><![CDATA[				'status2'     => ($result['status'] ? $this->language->get('text_enabled2') : $this->language->get('text_disabled2')),]]></add>
		</operation>
		<operation error="log">
			<search position="before" >
			<![CDATA[$this->template = 'catalog/category_list.tpl';]]></search> 
			<add><![CDATA[
			// Admin Enhanced
			$this->data['ecats'] = $this->config->get('config_ecats');
			$this->data['ecats1'] = $this->config->get('config_ecats1');
			$this->data['ecats2'] = $this->config->get('config_ecats2');
			$this->data['ecats4'] = $this->config->get('config_ecats4');
			$this->data['emisc6'] = $this->config->get('config_emisc6');
			$this->data['column_status'] = $this->language->get('column_status');
			$this->data['text_cenabtot'] = $this->language->get('text_cenabtot');
			$this->data['text_cviewprods'] = $this->language->get('text_cviewprods');
			$this->data['text_enabled2'] = $this->language->get('text_enabled2');
			$this->data['text_disabled2'] = $this->language->get('text_disabled2');
			$this->data['text_eedit'] = $this->language->get('text_eedit');
			$this->data['text_eview'] = $this->language->get('text_eview');
			$this->data['text_ordsaved'] = $this->language->get('text_ordsaved');
			$this->data['token'] = $this->session->data['token'];
			// Admin Enhanced
			]]></add>
		</operation>
		<operation error="log">
			<search position="replace" index="1">
			<![CDATA[$results = $this->model_catalog_category->getCategories($data);]]></search> 
			<add><![CDATA[
		// Admin Enhanced
		$results = $this->model_catalog_category->getCategories($data);		
		// Admin Enhanced
			]]></add>
		</operation>
		<operation error="log">
			<search position="before" >
			<![CDATA[
		$this->load->model('design/layout');			
			]]></search> 
			<add><![CDATA[
			// Admin Enhanced
			$this->data['tab_seo'] = $this->language->get('tab_seo');
			$this->data['entry_cparent'] = $this->language->get('entry_cparent');
			$this->data['ecats5'] = $this->config->get('config_ecats5');
			$this->data['ecats7'] = $this->config->get('config_ecats7');
			// Admin Enhanced
			]]></add>
		</operation>
		<operation error="log">
			<search position="replace" >
			<![CDATA[
		$this->template = 'catalog/category_form.tpl';			
			]]></search> 
			<add><![CDATA[
		// Admin Enhanced
		 if ($this->config->get('config_ecats7') == 1) {
		 $this->template = 'catalog/category_enhanced_form.tpl';
		 } else { 
		$this->template = 'catalog/category_form.tpl';		
		 }
		// Admin Enhanced
			]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA[
			$this->data['button_insert']
			]]></search>
			<add><![CDATA[
			$this->data['button_enable'] = $this->language->get('button_enable');
			$this->data['button_disable'] = $this->language->get('button_disable');
			]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA[		$this->data['insert'] = $this->url->link('catalog/category/insert', 'token=' . $this->session->data['token'] . $url, 'SSL');]]></search>
			<add><![CDATA[
			$this->data['enable'] = $this->url->link('catalog/category/enable', 'token=' . $this->session->data['token'] . $url, 'SSL');
			$this->data['disable'] = $this->url->link('catalog/category/disable', 'token=' . $this->session->data['token'] . $url, 'SSL');
			]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA[
			function getList() {
			]]></search>
			<add><![CDATA[
			public function enable() {
				  $this->language->load('catalog/category');
				  
				  $this->document->setTitle($this->language->get('heading_title'));
				  
				  $this->load->model('catalog/category');
				  
				  if (!$this->user->hasPermission('modify', 'catalog/category')) {
					  $this->error['warning'] = $this->language->get('error_permission');
				  } elseif (isset($this->request->post['selected'])) {
					  $enabled_count = 0;
					  
					  foreach ($this->request->post['selected'] as $category_id) {
						  $category_info = $this->model_catalog_category->getCategory($category_id);
						  
						  if ($category_info && !$category_info['status']) {
							  $this->model_catalog_category->enableCategory($category_id);
							  
							  $enabled_count++;
						  }
					  } 
					  
					  $this->session->data['success'] = sprintf($this->language->get('text_category_enabled'), $enabled_count);
			
			$url = '';

			if (isset($this->request->get['page'])) {
				$url .= '&page=' . $this->request->get['page'];
			}	
					
					  $this->redirect($this->url->link('catalog/category', 'token=' . $this->session->data['token'] . $url, 'SSL'));			
				  }
				  
				  $this->getList();
			  }

			public function disable() {
				  $this->language->load('catalog/category');
				  
				  $this->document->setTitle($this->language->get('heading_title'));
				  
				  $this->load->model('catalog/category');
				  
				  if (!$this->user->hasPermission('modify', 'catalog/category')) {
					  $this->error['warning'] = $this->language->get('error_permission');
				  } elseif (isset($this->request->post['selected'])) {
					  $disabled_count = 0;
					  
					  foreach ($this->request->post['selected'] as $category_id) {
						  $category_info = $this->model_catalog_category->getCategory($category_id);
						  
						  if ($category_info && $category_info['status']) {
							  $this->model_catalog_category->disableCategory($category_id);
							  
							  $disabled_count++;
						  }
					  } 
					  
					  $this->session->data['success'] = sprintf($this->language->get('text_category_disabled'), $disabled_count);

			$url = '';

			if (isset($this->request->get['page'])) {
				$url .= '&page=' . $this->request->get['page'];
			}	
									
					  $this->redirect($this->url->link('catalog/category', 'token=' . $this->session->data['token'] . $url, 'SSL'));			
				  }
				  
				  $this->getList();
			  }
			]]></add>
		</operation>
	</file>
	
	<file name="admin/controller/sale/order.php">
		<operation>
			<search position="after"><![CDATA[$this->data['button_filter'] = $this->language->get('button_filter');]]></search>
			<add><![CDATA[$this->data['button_clear_filters'] = $this->language->get('button_clear_filters');
			$this->data['emisc3'] = $this->config->get('config_emisc3');]]></add>
		</operation>
	</file>

	<file name="admin/controller/sale/customer.php">
		<operation>
			<search position="after"><![CDATA[$this->data['button_filter'] = $this->language->get('button_filter');]]></search>
			<add><![CDATA[$this->data['button_clear_filters'] = $this->language->get('button_clear_filters');
			$this->data['emisc3'] = $this->config->get('config_emisc3');]]></add>
		</operation>
	</file>
	
<!-- Model Files -->	
	<file name="admin/model/catalog/product.php">	
		<operation error="log">
			<search position="after"><![CDATA[$product_id = $this->db->getLastId();]]></search>
			<add><![CDATA[$this->session->data['new_product_id'] = $product_id;]]></add>
		</operation>
		<operation error="abort">
	    	<search position="before" index="1" ><![CDATA[public function editProduct($product_id, $data) {]]></search>
			<add><![CDATA[
	            public function getProductNames($product_id) {
		            $product_names = array();		
		            $query = $this->db->query("SELECT language_id,name FROM " . DB_PREFIX . "product_description WHERE product_id = '" . (int)$product_id . "'");
		
		            foreach ($query->rows as $result) {
			            $product_names[$result['language_id']] = $result['name'];
		            }		
		            return $product_names;
	            }

            ]]></add>
        </operation>
        <operation error="skip">
			<search position="before" ><![CDATA[if (!empty($data['filter_name'])) {]]></search>
			<add><![CDATA[
			if (!empty($data['filter_manufacturer'])) {
				$sql .= " AND p.manufacturer_id = '" . (int)$data['filter_manufacturer'] . "'";
			}
            if (!empty($data['filter_category_id'])) {
				$sql .= " AND p2c.category_id = '" . (int)$data['filter_category_id'] . "'";
			}
			if (isset($data['filter_order']) && !is_null($data['filter_order'])) {
				$sql .= " AND p.sort_order = '" . (int)$data['filter_order'] . "'";
			}
            ]]></add>
        </operation>
     	<operation error="skip">
			<search position="after" ><![CDATA[$sort_data = array(]]></search>
			<add><![CDATA['m.name','p.sort_order','p.model',]]>
            </add>
        </operation>
		<operation error="log">
			<search position="before"><![CDATA[
	public function addProduct($data) {
			]]></search>
			<add><![CDATA[
			// Admin Enhanced
			public function enableProduct($product_id) {
				$product_info = $this->getProduct($product_id);
		
				if ($product_id) {
					$this->db->query("UPDATE " . DB_PREFIX . "product SET status = '1' WHERE product_id = '" . (int)$product_id . "'");
				}

				$this->cache->delete('product');
			}

			public function disableProduct($product_id) {
				$product_info = $this->getProduct($product_id);
		
				if ($product_id) {
					$this->db->query("UPDATE " . DB_PREFIX . "product SET status = '0' WHERE product_id = '" . (int)$product_id . "'");
				}

				$this->cache->delete('product');
			}
			// Admin Enhanced
			]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA[
				public function getProduct($product_id)
			]]></search>
			<add><![CDATA[
				// Admin Enhanced
				public function setStatus($product_id, $column_name, $value){
		$this->db->query("UPDATE " . DB_PREFIX . "product SET " . $column_name . " = '" . (int)$value . "' WHERE product_id = '" . (int)$product_id . "'");
	}
	// Admin Enhanced
			]]></add>
		</operation>
		<operation error="log">
			<search position="before">
			<![CDATA[
	public function editProduct($product_id, $data) {
			]]></search> 
			<add><![CDATA[
	// Admin Enhanced
	public function saveImage($product_id,$image) {
        $this->db->query("UPDATE " . DB_PREFIX . "product SET image = '" . $this->db->escape(html_entity_decode($image, ENT_QUOTES, 'UTF-8')) . "', date_modified = NOW() WHERE product_id = '" . (int)$product_id . "'");

        $query = $this->db->query("SELECT image FROM " . DB_PREFIX . "product WHERE product_id = '". (int)$product_id . "'");
        $row = $query->row;
        return $row['image'];
    }

	public function saveOrder($product_id,$sort) {
        $this->db->query("UPDATE " . DB_PREFIX . "product SET sort_order = '" . (int)$sort . "', date_modified = NOW() WHERE product_id = '" . (int)$product_id . "'");

        $query = $this->db->query("SELECT sort_order FROM " . DB_PREFIX . "product WHERE product_id = '". (int)$product_id . "'");
        $row = $query->row;
        return $row['sort_order'];
    }
	
	public function saveName($product_id,$name) {
        $this->db->query("UPDATE " . DB_PREFIX . "product_description d, " . DB_PREFIX . "product p SET d.name = '" . $this->db->escape($name) . "', date_modified = NOW() WHERE p.product_id = '". (int)$product_id . "' AND d.product_id = '". (int)$product_id . "'");

        $query = $this->db->query("SELECT * FROM " . DB_PREFIX . "product p LEFT JOIN " . DB_PREFIX . "product_description pd ON (p.product_id = pd.product_id) WHERE p.product_id = '". (int)$product_id . "' AND pd.product_id = '". (int)$product_id . "'");

        $row = $query->row;
        return $row['name'];
    }

	public function saveModel($product_id,$model) {
        $this->db->query("UPDATE " . DB_PREFIX . "product SET model = '" . $this->db->escape($model) . "', date_modified = NOW() WHERE product_id = '". (int)$product_id . "'");

        $query = $this->db->query("SELECT model FROM " . DB_PREFIX . "product WHERE product_id = '". (int)$product_id . "'");
        $row = $query->row;
        return $row['model'];
    }
	
	public function savePrice($product_id,$price) {
        $this->db->query("UPDATE " . DB_PREFIX . "product SET price = '" . (float)$price. "', date_modified = NOW() WHERE product_id = '". (int)$product_id . "'");

        $query = $this->db->query("SELECT price FROM " . DB_PREFIX . "product WHERE product_id = '". (int)$product_id . "'");
        $row = $query->row;
        return $row['price'];
    }
	
	public function saveSpecial($product_id,$special) {
		$this->db->query("UPDATE " . DB_PREFIX . "product_special SET price = '" . (float)$special. "' WHERE product_id = '". (int)$product_id . "'");

        $query = $this->db->query("SELECT price FROM " . DB_PREFIX . "product_special WHERE product_id = '". (int)$product_id . "'");
        $row = $query->row;
        return $row['price'];
    }	

	public function saveQuantity($product_id,$quantity) {
        $this->db->query("UPDATE " . DB_PREFIX . "product SET quantity = '" . (int)$quantity. "', date_modified = NOW() WHERE product_id = '". (int)$product_id . "'");

        $query = $this->db->query("SELECT quantity FROM " . DB_PREFIX . "product WHERE product_id = '". (int)$product_id . "'");
        $row = $query->row;
        return $row['quantity'];
    }
	// Admin Enhanced
			]]></add>
		</operation>		
	</file>
	
	<file name="admin/model/catalog/category.php">
		<operation>
            <search position="replace"><![CDATA[$sql = "SELECT cp.category_id AS category_id,]]></search>
            <add><![CDATA[$sql = "SELECT cp.category_id AS category_id, MIN(c.status) AS status,]]></add>
        </operation>
		<operation>
			<search position="before"><![CDATA[
			function addCategory($data) {
			]]></search>
			<add><![CDATA[
	public function getCategoryNonAuto($category_id) {
		$query = $this->db->query("SELECT DISTINCT *, (SELECT keyword FROM " . DB_PREFIX . "url_alias WHERE query = 'category_id=" . (int)$category_id . "') AS keyword FROM " . DB_PREFIX . "category WHERE category_id = '" . (int)$category_id . "'");
		
		return $query->row;
	} 
	
	public function getCategoriesNonAuto($parent_id = 0) {
		$category_data = $this->cache->get('category.' . (int)$this->config->get('config_language_id') . '.' . (int)$parent_id);
	
		if (!$category_data) {
			$category_data = array();
		
			$query = $this->db->query("SELECT * FROM " . DB_PREFIX . "category c LEFT JOIN " . DB_PREFIX . "category_description cd ON (c.category_id = cd.category_id) WHERE c.parent_id = '" . (int)$parent_id . "' AND cd.language_id = '" . (int)$this->config->get('config_language_id') . "' ORDER BY c.sort_order, cd.name ASC");
		
			foreach ($query->rows as $result) {
				$category_data[] = array(
					'category_id' => $result['category_id'],
					'name'        => $this->getPathNonAuto($result['category_id'], $this->config->get('config_language_id')),
					'status'  	  => $result['status'],
					'sort_order'  => $result['sort_order']
				);
			
				$category_data = array_merge($category_data, $this->getCategoriesNonAuto($result['category_id']));
			}	
	
			$this->cache->set('category.' . (int)$this->config->get('config_language_id') . '.' . (int)$parent_id, $category_data);
		}
		
		return $category_data;
	}

	public function getPathNonAuto($category_id) {
		$query = $this->db->query("SELECT name, parent_id FROM " . DB_PREFIX . "category c LEFT JOIN " . DB_PREFIX . "category_description cd ON (c.category_id = cd.category_id) WHERE c.category_id = '" . (int)$category_id . "' AND cd.language_id = '" . (int)$this->config->get('config_language_id') . "' ORDER BY c.sort_order, cd.name ASC");
		
		if ($query->row['parent_id']) {
			return $this->getPathNonAuto($query->row['parent_id'], $this->config->get('config_language_id')) . $this->language->get('text_separator') . $query->row['name'];
		} else {
			return $query->row['name'];
		}
	}

			public function enableCategory($category_id) {
				$category_info = $this->getCategory($category_id);
		
				if ($category_id) {
					$this->db->query("UPDATE " . DB_PREFIX . "category SET status = '1' WHERE category_id = '" . (int)$category_id . "'");
				}

				$this->cache->delete('category');
			}

			public function disableCategory($category_id) {
				$category_info = $this->getCategory($category_id);
		
				if ($category_id) {
					$this->db->query("UPDATE " . DB_PREFIX . "category SET status = '0' WHERE category_id = '" . (int)$category_id . "'");
				}

				$this->cache->delete('category');
			}
			]]></add>
		</operation>
	</file>

<!-- Template Files -->	
	<file name="admin/view/template/catalog/category_list.tpl">
		<operation>
			<search position="after"><![CDATA[<div class="box">]]></search>
			<add><![CDATA[
			<!-- Admin Enhanced -->
<?php if ($ecats4 == 1) { ?>
    <div class="heading2">
      <h1><img src="view/image/category.png" alt="" /> <?php echo $heading_title; ?></h1>
	  <div class="buttons2"><?php if ($ecats1 == 1) { ?><a onclick="$('form').attr('action', '<?php echo $enable; ?>'); $('form').submit();" class="button" style="background:#060;"><?php echo $button_enable; ?></a> <a onclick="$('form').attr('action', '<?php echo $disable; ?>'); $('form').submit();" class="button" style="background:#900;"><?php echo $button_disable; ?></a><?php } ?><a href="<?php echo $repair; ?>" class="button"><?php echo $button_repair; ?></a><a href="<?php echo $insert; ?>" class="button"><?php echo $button_insert; ?></a><a onclick="$('#form').submit();" class="button"><?php echo $button_delete; ?></a></div>
	</div>
<?php } ?>
			<!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
			<search position="replace"><![CDATA[<div class="buttons">]]></search>
			<add><![CDATA[<?php if ($ecats1 == 1) { ?><div class="buttons"><a onclick="$('form').attr('action', '<?php echo $enable; ?>'); $('form').submit();" class="button" style="background:#060;"><?php echo $button_enable; ?></a> <a onclick="$('form').attr('action', '<?php echo $disable; ?>'); $('form').submit();" class="button" style="background:#900;"><?php echo $button_disable; ?></a><?php } else { ?><div class="buttons"><?php } ?>]]></add>
		</operation>
		<operation>
            <search position="replace"><![CDATA[<td class="left"><?php echo $category['name']; ?></td>]]></search>
            <add><![CDATA[<?php if ($ecats2 == 1) { ?><td class="left" style="padding:0" id="cname-<?php echo $category['category_id']; ?>"><span style="float:left; padding:10px 7px"><span <?php echo ($category['status']==1?"style='color:#060;font-size:14px;'":"style='color:#900;font-size:14px;'"); ?> ><?php echo $category['name']; ?></span> <?php if ($ecats == 1) { ?>(<?php echo $category['total_products_1'] . " / " . $category['total_products_all']; ?>)<?php } ?></span><span style="float:right; padding-top:7px;padding-right:7px;"><a class="tooltip catprodbox" title="View Products in this Category" href="<?php echo $category['href']; ?>"><?php echo $text_cviewprods; ?></a></span></td><?php } else { ?><td class="left"><?php echo $category['name']; ?></td><?php } ?>]]></add>
        </operation>
		<operation>
            <search position="replace"><![CDATA[<td class="left"><?php echo $column_name; ?></td>]]></search>
            <add><![CDATA[
			<?php if ($ecats2 == 1) { ?><td class="left"><?php echo $column_name; ?> <?php echo $text_cenabtot; ?></td><?php } else { ?><td class="left"><?php echo $column_name; ?></td><?php } ?>
			]]></add>
        </operation>
		<operation>
			<search position="replace"><![CDATA[<td class="right"><?php echo $column_action; ?></td>]]></search>
			<add><![CDATA[<td class="center"><?php echo $column_action; ?></td>]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA[
			<?php echo $column_action; ?>
			]]></search>
			<add><![CDATA[
			<?php if ($ecats1 == 1) { ?>
			<td class="center"><?php echo $column_status; ?></td>		
			<?php } ?>
			]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA[
			$category['action']
			]]></search>
			<add><![CDATA[
			<?php if ($ecats1 == 1) { ?>
			<td class="center"><?php echo $category['status2']; ?></td>
			<?php } ?>
			]]></add>
		</operation>
		<operation>
			<search position="replace"><![CDATA[<td class="right"><?php foreach ($category['action'] as $action) { ?>]]></search>
			<add><![CDATA[<td class="center"><?php foreach ($category['action'] as $action) { ?>]]></add>
		</operation>
		<operation>
			<search position="replace"><![CDATA[[ <a href="<?php echo $action['href']; ?>"><?php echo $action['text']; ?></a> ]]]></search>
			<add><![CDATA[<?php if ($this->user->hasPermission('modify', 'catalog/category')) { ?><a href="<?php echo $action['href']; ?>" class="cateditbox" title="<?php echo $category['name']; ?>"><span class="tooltip" title="Edit Category"><?php echo $action['text']; ?></span></a>&nbsp;&nbsp;<?php } ?><?php } ?>
        <?php
        $this->load->model('catalog/category');
        $category_store = $this->model_catalog_category->getCategoryStores($category['category_id']);
        ?>
        <?php if (in_array(0, $category_store)) { ?>
         <a class="tooltip" title="View Category in store" onClick="window.open('<?php echo $store . 'index.php?route=product/category&path=' . $category['category_id']; ?>');"><?php echo $text_eview; ?></a><br />
        <?php } ?>
        <?php foreach ($stores as $storel) { ?>
          <?php if (in_array($storel['id'], $category_store)) { ?>
         <a class="tooltip" title="View Category in store" onClick="window.open('<?php echo $storel['href'] . 'index.php?route=product/category&path=' . $category['category_id']; ?>');"><?php echo $text_eview; ?></a><br />
        <?php } ?>]]></add>
		</operation>
		<operation>
			<search position="replace"><![CDATA[
			colspan="4"
			]]></search>
			<add><![CDATA[
			<?php if ($ecats1 == 1) { ?>colspan="4"<?php } else { ?>colspan="3"<?php } ?>
			]]></add>
		</operation>
		<operation>
      <search position="before"><![CDATA[
<?php echo $footer; ?>
      ]]></search>
      <add><![CDATA[
<?php if ($emisc6 == 1) { ?>
<script type="text/javascript">
$(document).ready(function() {
	$('.tooltip').tooltipster({theme:'.tooltipster-noir',timer: 2500});
	$('.tooltip2').tooltipster({theme:'.tooltipster-noir',offsetY: 20,timer: 2500});
});
</script>
<?php } ?>
        ]]></add>
     </operation>
	</file>
	
	<file name="admin/view/template/catalog/product_list.tpl">
		<operation>
			<search position="after"><![CDATA[<div class="box">]]></search>
			<add><![CDATA[
			<!-- Admin Enhanced -->
<?php if ($eprod7 == 1) { ?>
    <div class="heading2">
      <h1><img src="view/image/product.png" alt="" /> <?php echo $heading_title; ?></h1>
	  <div class="buttons2">
	  <?php if ($emisc3 == 1) { ?><a onclick="clearFilters();" class="button" style="background: #C30;"><?php echo $button_clear_filters;?></a><?php } ?>
	  <?php if ($eprod2 == 1) { ?><a onclick="$('form').attr('action', '<?php echo $enable; ?>'); $('form').submit();" class="button" style="background: #060;"><?php echo $button_enable; ?></a> <a onclick="$('form').attr('action', '<?php echo $disable; ?>'); $('form').submit();" class="button" style="background: #900;"><?php echo $button_disable; ?></a><?php } ?><a href="<?php echo $insert; ?>" class="button"><?php echo $button_insert; ?></a><a onclick="$('#form').attr('action', '<?php echo $copy; ?>'); $('#form').submit();" class="button"><?php echo $button_copy; ?></a><a onclick="$('form').submit();" class="button"><?php echo $button_delete; ?></a></div>
	</div>
<?php } ?>
			<!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
			<search position="replace"><![CDATA[<div class="buttons">]]></search>
			<add><![CDATA[
			<!-- Admin Enhanced -->
			<?php if ($eprod2 == 1 || $emisc3 == 1) { ?><div class="buttons"><?php if ($emisc3 == 1) { ?><a onclick="clearFilters();" class="button" style="background: #C30;"><?php echo $button_clear_filters;?></a><?php } ?><?php if ($eprod2 == 1) { ?><a onclick="$('form').attr('action', '<?php echo $enable; ?>'); $('form').submit();" class="button" style="background: #060;"><?php echo $button_enable; ?></a> <a onclick="$('form').attr('action', '<?php echo $disable; ?>'); $('form').submit();" class="button" style="background: #900;"><?php echo $button_disable; ?></a><?php } ?><?php } else { ?><div class="buttons"><?php } ?>
			<!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
	    	<search position="replace" index="1"><![CDATA[<div class="content">]]></search>
	       	<add><![CDATA[         
<!-- Admin Enhanced -->
<?php if ($eprod4 == 1) { ?>
<div class="content">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td style="padding-bottom:10px; text-align:left;">
		 <?php if ($eprod4 == 1) { ?>
		 <?php echo $text_ecfilter; ?>:
		 <select name="filter_category_id" onchange="filter();" style="width: 18em;">>
         	<option value=""><?php echo $text_eallcats; ?></option>
            <?php foreach($categories as $c) { ?>
            <option value="<?php echo $c['category_id']?>" <?php echo ($c['category_id'] == $filter_category_id ? 'selected' : '') ?>><?php echo $c['name'] ?></option>
             <?php } ?>
          </select>
		  <?php } ?>
	</td>
  </tr>
</table>
<?php } else { ?>
<div class="content">
<?php } ?>
<!-- Admin Enhanced -->
            ]]></add>
        </operation>
		<operation>
			<search position="replace" index="4"><![CDATA[
              <td class="left">
			]]></search>
			<add><![CDATA[
              <!-- Admin Enhanced -->
              <?php if ($eprod1 == 1) { ?><td class="center"><?php } else { ?><td class="left"><?php } ?>
			  <!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
			<search position="replace"><![CDATA[<td class="right"><?php echo $column_action; ?></td>]]></search>
			<add><![CDATA[
              <!-- Admin Enhanced -->
              <?php if ($eprod1 == 1) { ?><td class="center"><?php echo $column_action; ?></td><?php } else { ?><td class="right"><?php echo $column_action; ?></td><?php } ?>
			  <!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
			<search position="replace"><![CDATA[<input type="text" name="filter_quantity" value="<?php echo $filter_quantity; ?>" style="text-align: right;" />]]></search>
			<add><![CDATA[
              <!-- Admin Enhanced -->
              <?php if ($eprod1 == 1) { ?><input type="text" name="filter_quantity" value="<?php echo $filter_quantity; ?>" style="text-align: right;" size="5" /><?php } else { ?><input type="text" name="filter_quantity" value="<?php echo $filter_quantity; ?>" style="text-align: right;" /><?php } ?>
			  <!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
			<search position="replace"><![CDATA[<td><select name="filter_status">]]></search>
			<add><![CDATA[
              <!-- Admin Enhanced -->
              <?php if ($eprod1 == 1) { ?><td class="center"><select name="filter_status"><?php } else { ?><td><select name="filter_status"><?php } ?>
			  <!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
			<search position="replace"><![CDATA[<td align="right"><a onclick="filter();" class="button"><?php echo $button_filter; ?></a></td>]]></search>
			<add><![CDATA[
              <!-- Admin Enhanced -->
              <?php if ($eprod1 == 1) { ?><td class="center"><a onclick="filter();" class="button"><?php echo $button_filter; ?></a></td><?php } else { ?><td align="right"><a onclick="filter();" class="button"><?php echo $button_filter; ?></a></td><?php } ?>
			  <!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
			<search position="replace" index="4"><![CDATA[<td class="right">]]></search>
			<add><![CDATA[
              <!-- Admin Enhanced -->
              <?php if ($eprod1 == 1) { ?><td class="center"><?php } else { ?><td class="right"><?php } ?>
			  <!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
			<search position="replace"><![CDATA[
              <td class="left"><?php echo $product['name']; ?></td>
			]]></search>
			<add><![CDATA[
              <!-- Admin Enhanced -->
              <?php if (($this->user->hasPermission('modify', 'catalog/product') && $eprod1 == 1)) { ?>
			  <td class="left">
              	<span class="edit-me2" id="name-<?php echo $product['product_id']; ?>" value="<?php echo $product['product_id']; ?>">
    			<input type="text" value="<?php echo $product['name']; ?>" />&nbsp;
   				<a onclick="save_name(<?php echo $product['product_id']; ?>)"><?php echo $text_esave ?></a>&nbsp
    			<a onclick="close_name(<?php echo $product['product_id']; ?>)"; return false;><?php echo $text_ecancel ?></a>
				</span>
                <span style="color: #333;" title="Click to edit" class="tooltip"><?php echo $product['name']; ?></span></td>
				<?php } else { ?>
              <td class="left"><?php echo $product['name']; ?></td>				
				<?php } ?>
			  <!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
			<search position="replace"><![CDATA[
              <td class="left"><?php echo $product['model']; ?></td>
			]]></search>
			<add><![CDATA[
              <!-- Admin Enhanced -->
              <?php if (($this->user->hasPermission('modify', 'catalog/product') && $eprod1 == 1)) { ?>
			  <td style="text-align:left;">
              	<span class="edit-me2" id="model-<?php echo $product['product_id']; ?>" value="<?php echo $product['product_id']; ?>">
    			<input type="text" value="<?php echo $product['model']; ?>" />&nbsp;
   				<a onclick="save_model(<?php echo $product['product_id']; ?>)"><?php echo $text_esave ?></a>&nbsp;
    			<a onclick="close_model(<?php echo $product['product_id']; ?>)"; return false;><?php echo $text_ecancel ?></a>
				</span>
                <span style="color: #000;" title="Click to edit" class="tooltip"><?php echo $product['model']; ?></span></td>
				<?php } else { ?>
              <td class="left"><?php echo $product['model']; ?></td>				
				<?php } ?>
			  <!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
			<search position="replace" offset="5"><![CDATA[
              <td class="left"><?php if ($product['special']) { ?>
			]]></search>
			<add><![CDATA[
              <!-- Admin Enhanced -->
		<?php if (($this->user->hasPermission('modify', 'catalog/product') && $eprod1 == 1)) { ?>
		<td style="text-align:left;">
		<table style="width:100%; padding:0; border:none;" cellpadding="0" cellspacing="0" border="0">	
			<?php if ($product['special']) { ?>
			<tr>  			  
			  <td style="border:none; padding-left:0; padding-right:0; background:none;">				
				<span class="edit-me2" id="price-<?php echo $product['product_id']; ?>" value="<?php echo $product['product_id']; ?>">
    			<input type="text" value="<?php echo $product['price']; ?>" size="8" />&nbsp;
   				<a onclick="save_price(<?php echo $product['product_id']; ?>)"><?php echo $text_esave ?></a>&nbsp;
    			<a onclick="close_price(<?php echo $product['product_id']; ?>)"; return false;><?php echo $text_ecancel ?></a>
				</span>
				<span style="padding:5px 0 5px 0;" title="Click to edit" class="tooltip"><?php echo $product['price']; ?></span>
			  </td>
			 </tr>
			 <tr>
			  <td style="border:none; padding-left:0; padding-right:0; background:none;">
				<span class="edit-me2" id="special-<?php echo $product['product_id']; ?>" value="<?php echo $product['product_id']; ?>">
				<input type="text" value="<?php echo $product['special']; ?>" size="8" />&nbsp;
   				<a onclick="save_special(<?php echo $product['product_id']; ?>)"><?php echo $text_esave ?></a>&nbsp;
    			<a onclick="close_special(<?php echo $product['product_id']; ?>)"; return false;><?php echo $text_ecancel ?></a>
				</span>                
                <span style="color: #b00; padding:5px 0 5px 0;" title="Click to edit" class="tooltip"><?php echo $product['special']; ?></span>
               </td>
			 </tr> 
			  <?php } else { ?>
			 <tr>  			  
			  <td style="border:none; padding-left:0; padding-right:0;">
			 	<span class="edit-me2" id="price-<?php echo $product['product_id']; ?>" value="<?php echo $product['product_id']; ?>">
    			<input type="text" value="<?php echo $product['price']; ?>" size="8" />&nbsp;
   				<a onclick="save_price(<?php echo $product['product_id']; ?>)"><?php echo $text_esave ?></a>&nbsp;
    			<a onclick="close_price(<?php echo $product['product_id']; ?>)"; return false;><?php echo $text_ecancel ?></a>
				</span>
                <span style="color: #000;" title="Click to edit" class="tooltip"><?php echo $product['price']; ?></span>
                <?php } ?>
			  </td>
			</tr>
		</table>
		</td>				
<?php } else { ?>
              <td class="left">
			  	<?php if ($product['special']) { ?>
                <span style="text-decoration: line-through;"><?php echo $product['price']; ?></span>
                <span style="color: #b00;"><?php echo $product['special']; ?></span>
                <?php } else { ?>
                <?php echo $product['price']; ?>
                <?php } ?>
			  </td>				
<?php } ?>
			  <!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
			<search position="replace" offset="6"><![CDATA[
              <td class="right"><?php if ($product['quantity'] <= 0) { ?>
			]]></search>
			<add><![CDATA[
              <!-- Admin Enhanced -->
              <?php if (($this->user->hasPermission('modify', 'catalog/product') && $eprod1 == 1)) { ?>
			  <td style="text-align:right;">
    			<span class="edit-me" id="quantity-<?php echo $product['product_id']; ?>" value="<?php echo $product['product_id']; ?>">
    			<a onclick="save_quantity(<?php echo $product['product_id']; ?>)"><?php echo $text_esave ?></a>&nbsp;
    			<a onclick="close_quantity(<?php echo $product['product_id']; ?>)"; return false;><?php echo $text_ecancel ?></a>&nbsp;
				<input type="text" value="<?php echo $product['quantity']; ?>" size="5" />
				</span>
				<?php if ($product['quantity'] <= 0) { ?>
                <span style="color: #FF0000;" title="Click to edit" class="tooltip"><?php echo $product['quantity']; ?></span>
                <?php } elseif ($product['quantity'] <= 5) { ?>
                <span style="color: #FFA500;" title="Click to edit" class="tooltip"><?php echo $product['quantity']; ?></span>
                <?php } else { ?>
                <span style="color: #008000;" title="Click to edit" class="tooltip"><?php echo $product['quantity']; ?></span>
                <?php } ?>
              </td>
			  <?php } else { ?>
			  <td class="right"><?php if ($product['quantity'] <= 0) { ?>
                <span style="color: #FF0000;"><?php echo $product['quantity']; ?></span>
                <?php } elseif ($product['quantity'] <= 5) { ?>
                <span style="color: #FFA500;"><?php echo $product['quantity']; ?></span>
                <?php } else { ?>
                <span style="color: #008000;"><?php echo $product['quantity']; ?></span>
                <?php } ?></td>
			  <?php } ?>
			  <!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
			<search position="replace"><![CDATA[
              <td class="left"><?php echo $product['status']; ?></td>
			]]></search>
			<add><![CDATA[
              <!-- Admin Enhanced -->
			  <?php if (($this->user->hasPermission('modify', 'catalog/product') && $eprod1 == 1)) { ?>
			  <td class="center"><a class="ajaxstatus tooltip"  title="Change Status" id="status-<?php echo $product['product_id']; ?>" style="padding:10px;"><?php echo $product['status2']; ?></a></td>
			  <?php } else { ?>
              <td class="left"><?php echo $product['status']; ?></td>
              <?php } ?>
			  <!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
			<search position="replace"><![CDATA[[ <a href="<?php echo $action['href']; ?>"><?php echo $action['text']; ?></a> ]]]></search>
			<add><![CDATA[<?php if ($this->user->hasPermission('modify', 'catalog/product')) { ?><a href="<?php echo $action['href']; ?>" title="<?php echo $product['name']; ?>" class="prodeditbox"><span class="tooltip" title="Edit Product"><?php echo $action['text']; ?></span></a>&nbsp;&nbsp;<?php } ?><?php } ?>
      <?php
      $this->load->model('catalog/product');
      $product_store = $this->model_catalog_product->getProductStores($product['product_id']);
      ?>
      <?php if (in_array(0, $product_store)) { ?>
       <a title="View in store" class="tooltip" onClick="window.open('<?php echo $store . 'index.php?route=product/product&product_id=' . $product['product_id']; ?>');"><?php echo $text_eview; ?></a><br />
       <?php } ?>
          <?php foreach ($stores as $storel) { ?>
            <?php if (in_array($storel['id'], $product_store)) { ?>
             <a title="View in store" class="tooltip" onClick="window.open('<?php echo $storel['href'] . 'index.php?route=product/product&product_id=' . $product['product_id']; ?>');"><?php echo $text_eview; ?></a><br />
           <?php } ?>]]></add>
		</operation>
		<operation>
            <search position="replace"><![CDATA[url = 'index.php?route=catalog/product&token=<?php echo $token; ?>';]]></search>            <add><![CDATA[url = 'index.php?route=catalog/product&token=<?php echo $token; ?>';]]></add>
        </operation>
		<operation>
			<search position="before"><![CDATA[function filter() ]]></search>
			<add><![CDATA[function clearFilters() {
	url = 'index.php?route=catalog/product&token=<?php echo $token; ?>';
	
	var filter_category_id = '';	
	if (filter_category_id) {
		url += '&filter_category_id=' + encodeURIComponent(filter_category_id);
	}
	
	var filter_manufacturer = '';	
	if (filter_manufacturer) {
		url += '&filter_manufacturer=' + encodeURIComponent(filter_manufacturer);
	}
	
	var filter_name = '';	
	if (filter_name) {
		url += '&filter_name=' + encodeURIComponent(filter_name);
	}
	
	var filter_model = '';	
	if (filter_model) {
		url += '&filter_model=' + encodeURIComponent(filter_model);
	}
	
	var filter_price = '';	
	if (filter_price) {
		url += '&filter_price=' + encodeURIComponent(filter_price);
	}
	
	var filter_quantity = '';	
	if (filter_quantity) {
		url += '&filter_quantity=' + encodeURIComponent(filter_quantity);
	}
	
	var filter_status = '*';	
	if (filter_status != '*') {
		url += '&filter_status=' + encodeURIComponent(filter_status);
	}	

	location = url;
}]]></add>
		</operation>
		<operation>
	  		<search position="before" index="1"><![CDATA[var filter_name = $('input[name=\'filter_name\']').attr('value');]]></search>
	    	<add><![CDATA[/* Admin Enhanced */
	var filter_category_id = $('select[name=\'filter_category_id\']').attr('value');	
	if (filter_category_id) {
    	url += '&filter_category_id=' + encodeURIComponent(filter_category_id);
	}                

	var filter_manufacturer = $('select[name=\'filter_manufacturer\']').attr('value');	
	if (filter_manufacturer) {
		url += '&filter_manufacturer=' + encodeURIComponent(filter_manufacturer);
	}
	
	var filter_cat_id = $('select[name=\'filter_category_id2\']').attr('value');	
	if (filter_cat_id) {
    	url += '&filter_category_id=' + encodeURIComponent(filter_cat_id);
	}                

	var filter_manuf = $('select[name=\'filter_manufacturer2\']').attr('value');	
	if (filter_manuf) {
		url += '&filter_manufacturer=' + encodeURIComponent(filter_manuf);
	}
	/* Admin Enhanced */
            ]]></add>
      	</operation>
		<operation>
			<search position="before"><![CDATA[
				<?php echo $footer; ?>
			]]></search>
			<add><![CDATA[
				<!-- Admin Enhanced -->
<?php if (($this->user->hasPermission('modify', 'catalog/product') && $eprod1 == 1)) { ?>
<style>
.list .left {padding:0 7px}
.edit-me {
   display:none;
   float:right;
   margin-right: 5px;
   clear:right;
   width:100%;
}
.edit-me input {
   float:right;
   text-align: right;
   cursor: text;
   margin-bottom:5px;
}
.edit-me +span {
   cursor: pointer;
   display: block;
   padding:5px 0;
}
.edit-me +span:hover {
   background: transparent url('view/image/review.png') left center no-repeat;
}
.edit-me2 {
   display:none;
   float:left;
   margin-bottom: 5px;
   clear:right;
   width:100%;
}
.edit-me2 input {
   float:left;
   text-align: left;
   cursor: text;
   margin-bottom:5px;
}
.edit-me2 +span {
   cursor: pointer;
   display: block;
   padding:5px 0;
}
.edit-me2 +span:hover {
   background: transparent url('view/image/review.png') right center no-repeat;
}
</style>
<script type="text/javascript"><!--
$(document).ready(function() {
	$('.edit-me').each(function(index, wrapper) {
		$(this).siblings().click(function() {
			$(wrapper).show();
			$(wrapper).siblings().hide();
		})
	});
	$('.edit-me2').each(function(index, wrapper) {
		$(this).siblings().click(function() {
			$(wrapper).show();
			$(wrapper).siblings().hide();
		})
	});
	$('.edit-me3').each(function(index, wrapper) {
		$(this).siblings().click(function() {
			$(wrapper).show();
			$(wrapper).siblings().hide();
		})
	});
});

function save_name(id) {
	var input_name = $('#name-'+id+' input');
	var name = $(input_name).val();
	$(".success2, .warning2, .error").remove();
	$.ajax({
		url: 'index.php?route=catalog/product/saveName&product_id='+id+'&name='+name+'&token=<?php echo $token; ?>',
		dataType: 'html',
		data: {},
		success: function(data) { 
			$('#name-'+id).next().html(name);
			close_name(id);
			var infotext = data.match(/<div\s+class="success">[\S\s]*?<\/div>/gi);
        	if (infotext) {
            	var infotext = infotext[0].replace(/(<\/?[^>]+>)/gi, "");
            	$("h1").after("<span class='success2'>" + infotext + "</span>");
            	$(".success2").delay(3000).fadeOut("slow");
        	}
		}
	});
}

function close_name(id) {
	$('.edit-me2 input').blur();
	$('#name-'+id).siblings().show();
	$('#name-'+id).hide();
}

function save_model(id) {
	var input_model = $('#model-'+id+' input');
	var model = $(input_model).val();
	$(".success2, .warning2, .error").remove();
	$.ajax({
		url: 'index.php?route=catalog/product/saveModel&product_id='+id+'&model='+model+'&token=<?php echo $token; ?>',
		dataType: 'html',
		data: {},
		success: function(data) { 
			$('#model-'+id).next().html(model);
			close_model(id);
			var infotext = data.match(/<div\s+class="success">[\S\s]*?<\/div>/gi);
        	if (infotext) {
            	var infotext = infotext[0].replace(/(<\/?[^>]+>)/gi, "");
            	$("h1").after("<span class='success2'>" + infotext + "</span>");
            	$(".success2").delay(3000).fadeOut("slow");
        	}
		}
	});
}

function close_model(id) {
	$('.edit-me2 input').blur();
	$('#model-'+id).siblings().show();
	$('#model-'+id).hide();
}

function save_price(id) {
	var input_price = $('#price-'+id+' input');
	var price = $(input_price).val();
	$(".success2, .warning2, .error").remove();
	$.ajax({
		url: 'index.php?route=catalog/product/savePrice&product_id='+id+'&price='+price+'&token=<?php echo $token; ?>',
		dataType: 'html',
		data: {},
		success: function(data) { 
			$('#price-'+id).next().html(price);
			close_price(id);
			var infotext = data.match(/<div\s+class="success">[\S\s]*?<\/div>/gi);
        	if (infotext) {
            	var infotext = infotext[0].replace(/(<\/?[^>]+>)/gi, "");
            	$("h1").after("<span class='success2'>" + infotext + "</span>");
            	$(".success2").delay(3000).fadeOut("slow");
        	}
		}
	});
}

function close_price(id) {
	$('.edit-me2 input').blur();
	$('#price-'+id).siblings().show();
	$('#price-'+id).hide();
}

function save_special(id) {
	var input_special = $('#special-'+id+' input');
	var special = $(input_special).val();
	$(".success2, .warning2, .error").remove();
	$.ajax({
		url: 'index.php?route=catalog/product/saveSpecial&product_id='+id+'&special='+special+'&token=<?php echo $token; ?>',
		dataType: 'html',
		data: {},
		success: function(data) { 
			$('#special-'+id).next().html(special);
			close_special(id);
			var infotext = data.match(/<div\s+class="success">[\S\s]*?<\/div>/gi);
        	if (infotext) {
            	var infotext = infotext[0].replace(/(<\/?[^>]+>)/gi, "");
            	$("h1").after("<span class='success2'>" + infotext + "</span>");
            	$(".success2").delay(3000).fadeOut("slow");
        	}
		}
	});
}

function close_special(id) {
	$('.edit-me2 input').blur();
	$('#special-'+id).siblings().show();
	$('#special-'+id).hide();
}

function save_quantity(id) {
	var input_quantity = $('#quantity-'+id+' input');
	var quantity = $(input_quantity).val();
	$(".success2, .warning2, .error").remove();
	$.ajax({
		url: 'index.php?route=catalog/product/saveQuantity&product_id='+id+'&quantity='+quantity+'&token=<?php echo $token; ?>',
		dataType: 'html',
		data: {},
		success: function(data) { 
			$('#quantity-'+id).next().html(quantity);
			close_quantity(id);
			var infotext = data.match(/<div\s+class="success">[\S\s]*?<\/div>/gi);
        	if (infotext) {
            	var infotext = infotext[0].replace(/(<\/?[^>]+>)/gi, "");
            	$("h1").after("<span class='success2'>" + infotext + "</span>");
            	$(".success2").delay(3000).fadeOut("slow");
        	}
		}
	});
}

function close_quantity(id) {
	$('.edit-me input').blur();
	$('#quantity-'+id).siblings().show();
	$('#quantity-'+id).hide();
}

$('.ajaxstatus').click(function() {
	$(".success2, .warning2, .error").remove();
	var object_id=$(this).attr('id');
	$.ajax({
		url: 'index.php?route=catalog/product/setstatus&token=<?php echo $token; ?>',
		type: 'get',
		data: {object_id:object_id},
		dataType: 'html',
		success: function(html) {
			if(html!=''){				
				$('#'+object_id).html(html);
			}
			$("h1").after("<span class='success2'><?php echo $text_stasaved; ?></span>");
            $(".success2").delay(3000).fadeOut("slow");
		}
	});
});

//--></script>
<?php } ?>
<?php if ($emisc6 == 1) { ?>
<script type="text/javascript">
$(document).ready(function() {
	$('.tooltip').tooltipster({
		theme:'.tooltipster-noir',
		timer: 2500
	});
	$('.tooltip2').tooltipster({
		theme:'.tooltipster-noir',
		offsetY: 20,
		timer: 2500
	});
});
</script>
<?php } ?>
<!-- Admin Enhanced --> 
			]]></add>
		</operation>
	</file>
	
	<file name="admin/view/template/catalog/product_form.tpl">	
		<operation error="log">
			<search position="replace"><![CDATA[<?php echo $heading_title; ?></h1>]]></search>
			<add><![CDATA[<?php if ($eprod3 == 1) { ?><?php echo $heading_title; ?><span class="prodname"></span><span class="prodmodel"></span></h1><?php } else { ?><?php echo $heading_title; ?></h1><?php } ?>]]></add>
		</operation>
		<operation>
			<search position="bottom" offset="1"><![CDATA[ <!-- This is irrelevant --> ]]></search>
			<add><![CDATA[
				<!-- Admin Enhanced -->
				<?php if ($eprod3 == 1) { ?>
				<script type="text/javascript"><!--
				$name = $('input[name="product_description[<?php echo $this->config->get('config_language_id'); ?>][name]"]'); 
				$model = $('input[name="model"]'); 
				$prodname = $('.prodname');
				$prodmodel = $('.prodmodel');

				if ($name.val() != '') {
					$prodname.html(' - <span style="color:#060;">' + $name.val() + '</span>');
				}

				if ($model.val() != '') {
					$prodmodel.html(' (<span style="color:#900;">' + $model.val() + '</span>)'); 
				}

				$name.keyup(function() {
					if ($(this).val() != '') {
						$('.prodname').html(' - <span style="color:#060;">' + $(this).val() + '</span>');
					} else {
						$('.prodname').html('');
					}
				});

				$model.keyup(function() {
					if ($(this).val() != '') {
						$('.prodmodel').html(' (<span style="color:#900;">' + $(this).val() + '</span>)'); 
					} else {
						$('.prodmodel').html('');
					}
				});
				//--></script>
				<?php } ?>
				<!-- Admin Enhanced -->
			]]></add>
		</operation>		
	</file>
	
	<file name="admin/view/template/catalog/category_form.tpl">	
		<operation error="log">
			<search position="replace"><![CDATA[<?php echo $heading_title; ?></h1>]]></search>
			<add><![CDATA[<?php if ($ecats5 == 1) { ?><?php echo $heading_title; ?><span class="catname"></span></h1><?php } else { ?><?php echo $heading_title; ?></h1><?php } ?>]]></add>
		</operation>
		<operation>
			<search position="bottom" offset="1"><![CDATA[ <!-- This is irrelevant --> ]]></search>
			<add><![CDATA[
				<!-- Admin Enhanced -->
				<?php if ($ecats5 == 1) { ?>
				<script type="text/javascript"><!--
				$name = $('input[name="category_description[<?php echo $this->config->get('config_language_id'); ?>][name]"]'); 
				$catname = $('.catname');

				if ($name.val() != '') {
					$catname.html(' > <span style="color:#060;">' + $name.val() + '</span>');
				}

				$name.keyup(function() {
					if ($(this).val() != '') {
						$('.catname').html(' > <span style="color:#060;">' + $(this).val() + '</span>');
					} else {
						$('.catname').html('');
					}
				});
				//--></script>
				<?php } ?>
				<!-- Admin Enhanced -->
			]]></add>
		</operation>		
	</file>
	
	<file name="admin/view/template/setting/setting.tpl">
		<operation>
			<search position="after"><![CDATA[<div class="box">]]></search>
			<add><![CDATA[
			<!-- Admin Enhanced -->
<?php if ($emisc5 == 1) { ?>
    <div class="heading2">
      <h1><img src="view/image/product.png" alt="" /> <?php echo $heading_title; ?></h1>
	  <div class="buttons2">
	  <a onclick="$('#form').submit();" class="button"><?php echo $button_save; ?></a><a href="<?php echo $cancel; ?>" class="button"><?php echo $button_cancel; ?></a></div>
	</div>
<?php } ?>
			<!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
            <search position="replace"><![CDATA[<a href="#tab-server"><?php echo $tab_server; ?></a></div>]]></search>
            <add><![CDATA[<!-- Admin Enhanced --><a href="#tab-server"><?php echo $tab_server; ?></a><a href="#tab-enhanced"><?php echo $tab_enhanced; ?></a></div><!-- Admin Enhanced -->]]></add>
        </operation>
		<operation>
            <search position="after" index="19"><![CDATA[</div>]]></search>
            <add><![CDATA[
<!-- Admin Enhanced -->
        <div id="tab-enhanced">

<div id="etabs" class="htabs"><a href="#tab-dashboard"><?php echo $tab_dashboard; ?></a><a href="#tab-products"><?php echo $tab_products; ?></a><a href="#tab-categories"><?php echo $tab_categories; ?></a><a href="#tab-other"><?php echo $tab_other; ?></a></div>
		<div id="tab-dashboard">
		  <table class="form">
			<tr>
              <td><?php echo $entry_eqick; ?></td>
              <td><?php if ($config_eqick) { ?>
                <input type="radio" name="config_eqick" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_eqick" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_eqick" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_eqick" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_estat; ?></td>
              <td><?php if ($config_estat) { ?>
                <input type="radio" name="config_estat" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_estat" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_estat" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_estat" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_etabs; ?></td>
              <td><?php if ($config_etabs) { ?>
                <input type="radio" name="config_etabs" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_etabs" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_etabs" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_etabs" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>	  
			<tr>
              <td><?php echo $entry_egana; ?></td>
              <td><?php if ($config_egana) { ?>
                <input type="radio" name="config_egana" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_egana" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_egana" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_egana" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_eapi_key; ?></td>
              <td><input type="text" name="config_eapi_key" value="<?php if (isset($config_eapi_key)) echo $config_eapi_key; ?>" /></td>
            </tr>
            <tr>
              <td><?php echo $entry_eprofile_id; ?></td>
              <td><input type="text" name="config_eprofile_id" value="<?php if (isset($config_eprofile_id)) echo $config_eprofile_id; ?>" /></td>
            </tr>
          </table>
		  </div>
		  
		  <div id="tab-products">
		  <table class="form">
            <tr>
              <td><?php echo $entry_eprod1; ?></td>
              <td><?php if ($config_eprod1) { ?>
                <input type="radio" name="config_eprod1" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_eprod1" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_eprod1" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_eprod1" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_eprod2; ?></td>
              <td><?php if ($config_eprod2) { ?>
                <input type="radio" name="config_eprod2" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_eprod2" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_eprod2" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_eprod2" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_eprod3; ?></td>
              <td><?php if ($config_eprod3) { ?>
                <input type="radio" name="config_eprod3" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_eprod3" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_eprod3" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_eprod3" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_eprod4; ?></td>
              <td><?php if ($config_eprod4) { ?>
                <input type="radio" name="config_eprod4" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_eprod4" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_eprod4" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_eprod4" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_eprod7; ?></td>
              <td><?php if ($config_eprod7) { ?>
                <input type="radio" name="config_eprod7" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_eprod7" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_eprod7" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_eprod7" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_eprod9; ?></td>
              <td><?php if ($config_eprod9) { ?>
                <input type="radio" name="config_eprod9" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_eprod9" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_eprod9" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_eprod9" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
          </table>
		  </div>
		  
		  <div id="tab-categories">
		  <table class="form">
            <tr>
              <td><?php echo $entry_ecats; ?></td>
              <td><?php if ($config_ecats) { ?>
                <input type="radio" name="config_ecats" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_ecats" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_ecats" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_ecats" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_ecats1; ?></td>
              <td><?php if ($config_ecats1) { ?>
                <input type="radio" name="config_ecats1" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_ecats1" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_ecats1" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_ecats1" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_ecats2; ?></td>
              <td><?php if ($config_ecats2) { ?>
                <input type="radio" name="config_ecats2" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_ecats2" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_ecats2" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_ecats2" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_ecats4; ?></td>
              <td><?php if ($config_ecats4) { ?>
                <input type="radio" name="config_ecats4" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_ecats4" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_ecats4" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_ecats4" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_ecats5; ?></td>
              <td><?php if ($config_ecats5) { ?>
                <input type="radio" name="config_ecats5" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_ecats5" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_ecats5" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_ecats5" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_ecats7; ?></td>
              <td><?php if ($config_ecats7) { ?>
                <input type="radio" name="config_ecats7" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_ecats7" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_ecats7" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_ecats7" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
          </table>
		  </div>
		  
		  <div id="tab-other">
		  <table class="form">
            <tr>
              <td><?php echo $entry_edate; ?></td>
              <td><?php if ($config_edate) { ?>
                <input type="radio" name="config_edate" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_edate" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_edate" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_edate" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_emisc1; ?></td>
              <td><?php if ($config_emisc1) { ?>
                <input type="radio" name="config_emisc1" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_emisc1" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_emisc1" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_emisc1" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_emisc3; ?></td>
              <td><?php if ($config_emisc3) { ?>
                <input type="radio" name="config_emisc3" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_emisc3" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_emisc3" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_emisc3" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_emisc4; ?></td>
              <td><?php if ($config_emisc4) { ?>
                <input type="radio" name="config_emisc4" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_emisc4" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_emisc4" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_emisc4" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_emisc5; ?></td>
              <td><?php if ($config_emisc5) { ?>
                <input type="radio" name="config_emisc5" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_emisc5" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_emisc5" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_emisc5" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
			<tr>
              <td><?php echo $entry_emisc6; ?></td>
              <td><?php if ($config_emisc6) { ?>
                <input type="radio" name="config_emisc6" value="1" checked="checked" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_emisc6" value="0" />
                <?php echo $text_no; ?>
                <?php } else { ?>
                <input type="radio" name="config_emisc6" value="1" />
                <?php echo $text_yes; ?>
                <input type="radio" name="config_emisc6" value="0" checked="checked" />
                <?php echo $text_no; ?>
                <?php } ?></td>
            </tr>
          </table>
		  </div>
		  
        </div>			
<!-- Admin Enhanced -->
			]]></add>
        </operation>
		<operation>
			<search position="after"><![CDATA[$('#tabs a').tabs();]]></search>
			<add><![CDATA[
$('#etabs a').tabs();
			]]></add>
		</operation>
    </file>
	
	<file name="admin/view/template/common/header.tpl">
		<operation>
			<search position="before"><![CDATA[
	<script type="text/javascript" src="view/javascript/jquery/jquery-1.7.1.min.js"></script>
			]]></search>
			<add><![CDATA[
	<!-- Admin Enhanced -->
	<?php if ($emisc4 == 1) { ?>
	<link rel="stylesheet" type="text/css" href="view/stylesheet/highlight-css.css" />
	<?php } ?>
	<!-- Admin Enhanced -->
			]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA[<?php foreach ($scripts as $script) { ?>]]></search>
            <add><![CDATA[<!-- Admin Enhanced --><?php if ($egana == 1) { ?><script type="text/javascript" src='view/javascript/oocharts/oocharts.js'></script><?php } ?><!-- Admin Enhanced -->]]></add>
		</operation>
		<operation>
      		<search position="before"><![CDATA[</head>]]></search>
      		<add><![CDATA[
<!-- Admin Enhanced -->
<link rel="stylesheet" type="text/css" href="view/javascript/jquery/colorbox/colorbox.css?v=1.0" media="screen" />
<script type="text/javascript" src="view/javascript/jquery/colorbox/jquery.colorbox-min.js"></script>
<link rel="stylesheet" type="text/css" href="../eadmin/css/eadmin.css" />
<?php if ($emisc6 == 1) { ?>
<link rel="stylesheet" type="text/css" href="view/javascript/jquery/tooltipster/css/tooltipster.css" />
<link rel="stylesheet" type="text/css" href="view/javascript/jquery/tooltipster/css/themes/tooltipster-noir.css" />
<script type="text/javascript" src="view/javascript/jquery/tooltipster/js/jquery.tooltipster.min.js"></script>
<?php } ?>
<?php if ($edate == 1) { ?>
<script language="JavaScript" type="text/javascript">
function clock() {
var d = new Date();
var month = d.getMonth()
var day = d.getDate();
var hours = d.getHours();
var minutes = d.getMinutes();
var seconds = d.getSeconds();
if (month == 0) month = "<?php echo $text_january; ?>"
 else if (month == 1) month = "<?php echo $text_february; ?>"
 else if (month == 2) month = "<?php echo $text_march; ?>"
 else if (month == 3) month = "<?php echo $text_april; ?>"
 else if (month == 4) month = "<?php echo $text_may; ?>"
 else if (month == 5) month = "<?php echo $text_june; ?>"
 else if (month == 6) month = "<?php echo $text_july; ?>"
 else if (month == 7) month = "<?php echo $text_august; ?>"
 else if (month == 8) month = "<?php echo $text_september; ?>"
 else if (month == 9) month = "<?php echo $text_october; ?>"
 else if (month == 10) month = "<?php echo $text_november; ?>"
 else if (month == 11) month = "<?php echo $text_december; ?>";
if (day <= 9) day = "0" + day;
if (hours <= 9) hours = "0" + hours;
if (minutes <= 9) minutes = "0" + minutes;
if (seconds <= 9) seconds = "0" + seconds;
date_time =+ day + " " + month + " " + d.getFullYear() +
"<?php echo $text_year; ?><br />"+ hours + ":" + minutes + ":" + seconds;
if (document.layers) {
 document.layers.doc_time.document.write(date_time);
 document.layers.doc_time.document.close();}
else document.getElementById("doc_time").innerHTML = date_time;
 setTimeout("clock()", 1000);
}
</script>
<?php } ?>
<?php if ($eprod7 == 1 || $ecats4 == 1) { ?>
<script language="JavaScript" type="text/javascript">
$(document).scroll(function () {
    var y = $(this).scrollTop();
    if (y > 276) {
        $('.heading2').fadeIn('slow');
    } else {
        $('.heading2').fadeOut('fast');
    }
});
</script>
<style>
.box > .heading2 {
	width:100%;
	padding-left: 7px;
	padding-right: 7px;
	border-bottom: 2px solid #DBDBDB;
	background: #fff url('view/image/box.png') repeat-x;
	-webkit-border-radius: 0px;
	-moz-border-radius: 0px;
	-khtml-border-radius: 0px;
	border-radius: 0px;
	display:none;
	position: fixed;
	top: 0px;
	right: 0px;
	box-shadow: 0 3px 6px #999;	
}
.box > .heading2 h1 {
	margin: 0 0 0 45px;
	padding: 11px 0px 0px 0px;
	color: #003A88;
	font-size: 16px;
	float: left;
}
.box > .heading2 h1 img {
	float: left;
	margin-top: -1px;
	margin-left: 3px;
	margin-right: 8px;
}
.box > .heading2 .buttons2 {
	float: right;
	padding-top: 7px;
	-webkit-border-radius: 0px;
	-moz-border-radius: 0px;
	-khtml-border-radius: 0px;
	border-radius: 0px;
	margin: -1px 30px 0 0!important;
	padding: 6px;
}
.box > .heading2 .buttons2 .button {
	margin-left: 5px;
}
</style>
<?php } ?>
<style>
span.success2 {
	margin: 13px 0 0 25px;
	padding: 0 0 0 20px;
	color: #060;
	font-weight:bold;
	font-size: 13px;
	background: url('view/image/success.png') no-repeat 0 0;
	height:16px;
	float:left;
}
span.warning2 {
	margin: 13px 0 0 25px;
	padding: 0 0 0 20px;
	color: #900;
	font-weight:bold;
	font-size: 13px;
	background: url('view/image/warning.png') no-repeat 0 0;
	height:16px;
	float:left;
}
#toTop {
	display:none;
	text-decoration:none;
	position:fixed;
	bottom:10px;
	right:10px;
	overflow:hidden;
	width:25px;
	height:25px;
	border:none;
	text-indent:100%;
	background:url(view/image/ui.totop.png) no-repeat left top;
}
#toTopHover {
	background:url(view/image/ui.totop.png) no-repeat left -25px;
	width:25px;
	height:25px;
	display:block;
	overflow:hidden;
	float:left;
	opacity: 0;
	-moz-opacity: 0;
	filter:alpha(opacity=0);
}
#toTop:active, #toTop:focus {
	outline:none;
}
</style>
<!-- Admin Enhanced -->
          	]]>
      		</add>
    	</operation>
		<operation>
			<search position="after"><![CDATA[
			<div class="div2">
			]]></search>
			<add><![CDATA[
			<?php if ($edate == 1) { ?><div id="doc_time" style="float:left;position:relative;top:13px;left:20px;color:white"><script language="JavaScript" type="text/javascript">clock();</script></div><?php } ?>
			]]></add>
		</operation>
		<operation>
      		<search position="replace"><![CDATA[
      <li><a class="top" href="<?php echo $logout; ?>">
	  		]]></search>
      		<add><![CDATA[
      <!-- Admin Enhanced -->
	  <li id="logged"><a class="top" href="<?php echo $logout; ?>">
	  <!-- Admin Enhanced -->
          	]]>
      		</add>
    	</operation>
		<operation error="skip"><search position="after"><![CDATA[<link rel="stylesheet" type="text/css" href="view/stylesheet/stylesheet.css" />]]></search>
			<add><![CDATA[
<!-- Admin Enhanced -->
<?php if ($emisc1 == 1) { ?>
<style type="text/css">
#menu > ul #dashboard a.top {
	padding-left: 35px;
	background: url('view/image/home.png') 9px 7px no-repeat;
}
#menu > ul #catalog a.top {
	padding-left: 35px;
	background: url('../eadmin/image/menu/category.png') 9px 7px no-repeat;
}
#menu > ul #extension a.top {
	padding-left: 35px;
	background: url('../eadmin/image/menu/module.png') 9px 7px no-repeat;
}
#menu > ul #sale a.top {
	padding-left: 35px;
	background: url('../eadmin/image/menu/order.png') 9px 7px no-repeat;
}
#menu > ul #system a.top {
	padding-left: 35px;
	background: url('../eadmin/image/menu/setting.png') 9px 7px no-repeat;
}
#menu > ul #reports a.top {
	padding-left: 35px;
	background: url('../eadmin/image/menu/report.png') 9px 7px no-repeat;
}
#menu > ul #localisation a.top {
	padding-left: 35px;
	background: url('../eadmin/image/menu/language.png') 9px 7px no-repeat;
}
#menu > ul #help a.top {
	padding-left: 35px;
	background: url('../eadmin/image/menu/help.png') 9px 7px no-repeat;
}
#menu > ul #store a.top {
	padding-left: 35px;
	background: url('../eadmin/image/menu/preview.png') 9px 7px no-repeat;
}
#menu > ul #logged a.top {
	padding-left: 35px;
	background: url('../eadmin/image/menu/lockscreen.png') 9px 7px no-repeat;
}
#menu > ul #dashboard:hover, #menu > ul #catalog:hover, #menu > ul #extension:hover, #menu > ul #sale:hover, #menu > ul #system:hover, #menu > ul #reports:hover, #menu > ul #localisation:hover, #menu > ul #help:hover, #menu > ul #store:hover, #menu > ul #logged:hover {
	background: url('../eadmin/image/menu/top-hover.png') repeat-x;
}
#menu > ul .selected {
	background: url('../eadmin/image/menu/selected.png') repeat-x!important;
	color: #FFFFFF;
}
#menu > ul .selected:hover, #menu > ul .sfhover {
	background: url('../eadmin/image/menu/selected.png') repeat-x!important;
}
</style>
<?php } ?>

]]></add>
		</operation>
	</file>
	
	<file name="admin/view/template/common/footer.tpl">
		<operation>
			<search position="before"><![CDATA[</body></html>]]></search>
			<add><![CDATA[
	<!-- Admin Enhanced -->
<script type="text/javascript" src="view/javascript/jquery/jquery.ui.totop.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
/*
var defaults = {
containerID: 'toTop', // fading element id
containerHoverID: 'toTopHover', // fading element hover id
scrollSpeed: 1200,
easingType: 'linear' 
};
*/
$().UItoTop({ easingType: 'easeOutQuart' });
});
</script>
<!-- Admin Enhanced -->
			]]></add>
		</operation>
	</file>
		
	<file name="admin/view/template/setting/store_form.tpl">
		<operation>
			<search position="before" offset="1"><![CDATA[<td><?php echo $entry_ssl; ?></td>]]></search>
			<add><![CDATA[
			<!-- Admin Enhanced -->
            <?php if ($egana == 1) { ?>
			<tr>
              <td><?php echo $entry_eapi_key; ?></td>
              <td><input type="text" name="config_eapi_key" value="<?php if (isset($config_eapi_key)) echo $config_eapi_key; ?>" /></td>
            </tr>
            <tr>
              <td><?php echo $entry_eprofile_id; ?></td>
              <td><input type="text" name="config_eprofile_id" value="<?php if (isset($config_eprofile_id)) echo $config_eprofile_id; ?>" /></td>
            </tr>      
			<?php } ?>   
			<!-- Admin Enhanced -->
			]]></add>
		</operation>
	</file>
	
	<file name="admin/view/template/common/home.tpl">
        <operation>
      		<search position="after"><![CDATA[<div class="content">]]></search>
      		<add>
        	<![CDATA[
         <!-- Admin Enhanced -->
		 <?php if ($eqick == 1) { include '../eadmin/shortcuts/eadmin.php'; } ?>
		 <!-- Admin Enhanced -->
          	]]>
      		</add>
    	</operation>
		<operation>
            <search position="replace"><![CDATA[
      <div class="overview">
            ]]></search>
            <add><![CDATA[
      <!-- Admin Enhanced -->
	  <?php if ($estat == 1) { ?><div class="overview"><?php } else { ?><div class="overview" style="display:none;"><?php } ?>
	  <!-- Admin Enhanced -->
            ]]></add>
        </operation>
		<operation>
            <search position="replace"><![CDATA[
      <div class="statistic">
            ]]></search>
            <add><![CDATA[
      <!-- Admin Enhanced -->
	  <?php if ($estat == 1) { ?><div class="statistic"><?php } else { ?><div class="statistic" style="display:none;"><?php } ?>
	  <!-- Admin Enhanced -->
            ]]></add>
        </operation>
		<operation error="log">
      		<search position="replace" offset="36"><![CDATA[
      <div class="latest">
      ]]></search>
      <add><![CDATA[
<!-- Admin Enhanced -->
<?php if ($etabs == 1) { ?>
  <div class="latest">
   <div class="dashboard-heading"><?php echo $text_latest; ?></div>
    <div class="dashboard-content">
        <div id="latest_tabs" class="htabs">
            <a href="#tab-latest_order"><?php echo $tab_order; ?></a>
            <?php if ($customers) { ?>
            <a href="#tab-latest_customer"><?php echo $tab_customer; ?></a>
            <?php } ?>
			<?php if ($returns) { ?>
            <a href="#tab-latest_return"><?php echo $tab_return; ?></a>
            <?php } ?>
            <?php if ($reviews) { ?>
            <a href="#tab-latest_review"><?php echo $tab_review; ?></a>
            <?php } ?>
        </div>       
       <div id="tab-latest_order" class="htabs-content">  
              <table class="list">
                <thead>
                  <tr>
                    <td class="right"><?php echo $column_order; ?></td>
                    <td class="left"><?php echo $column_customer; ?></td>
                    <td class="left"><?php echo $column_status; ?></td>
                    <td class="left"><?php echo $column_date_added; ?></td>
                    <td class="right"><?php echo $column_total; ?></td>
                    <td class="right"><?php echo $column_action; ?></td>
                  </tr>
                </thead>
                <tbody>
                  <?php if ($orders) { ?>
                  <?php foreach ($orders as $order) { ?>
                  <tr>
                    <td class="right"><?php echo $order['order_id']; ?></td>
                    <td class="left"><?php echo $order['customer']; ?></td>
                    <td class="left"><?php echo $order['status']; ?></td>
                    <td class="left"><?php echo $order['date_added']; ?></td>
                    <td class="right"><?php echo $order['total']; ?></td>
                    <td class="right"><?php foreach ($order['action'] as $action) { ?>
                      [ <a href="<?php echo $action['href']; ?>"><?php echo $action['text']; ?></a> ]
                      <?php } ?></td>
                  </tr>
                  <?php } ?>
                  <?php } else { ?>
                  <tr>
                    <td class="center" colspan="6"><?php echo $text_no_results; ?></td>
                  </tr>
                  <?php } ?>
                </tbody>
              </table>
           </div>
       <?php if ($customers) { ?>
       <div id="tab-latest_customer" class="htabs-content">  
              <table class="list">
                <thead>
                  <tr>
                    <td class="left"><?php echo $column_customer; ?></td>
                    <td class="left"><?php echo $column_email; ?></td>
                    <td class="left"><?php echo $column_customer_group; ?></td>
                    <td class="left"><?php echo $column_status; ?></td>
                    <td class="right"><?php echo $column_date_added; ?></td>
                    <td class="right"><?php echo $column_action; ?></td>
                  </tr>
                </thead>
                <tbody>
                  <?php if ($customers) { ?>
                  <?php foreach ($customers as $customer) { ?>
                  <tr>
                    <td class="left"><?php echo $customer['name']; ?></td>
                    <td class="left"><?php echo $customer['email']; ?></td>
                    <td class="left"><?php echo $customer['customer_group']; ?></td>
                    <td class="left"><?php echo $customer['status']; ?></td>
                    <td class="right"><?php echo $customer['date_added']; ?></td>
                    <td class="right"><?php foreach ($customer['action'] as $action) { ?>
                      [ <a href="<?php echo $action['href']; ?>"><?php echo $action['text']; ?></a> ]
                      <?php } ?></td>
                  </tr>
                  <?php } ?>

                  <?php } else { ?>
                  <tr>
                    <td class="center" colspan="6"><?php echo $text_no_results; ?></td>
                  </tr>
                  <?php } ?>
                </tbody>
              </table>
           </div>
           <?php } ?>
       <?php if ($returns) { ?>
       <div id="tab-latest_return" class="htabs-content">  
              <table class="list">
                <thead>
                  <tr>
                    <td class="right"><?php echo $column_return_id; ?></td>
                    <td class="right"><?php echo $column_order_id; ?></td>
                    <td class="left"><?php echo $column_customer; ?></td>
                    <td class="left"><?php echo $column_product; ?></td>
                    <td class="left"><?php echo $column_model; ?></td>
                    <td class="left"><?php echo $column_date_added; ?></td>
                    <td class="right"><?php echo $column_action; ?></td>
                  </tr>
                </thead>
                <tbody>
                  <?php if ($returns) { ?>
                  <?php foreach ($returns as $return) { ?>
                  <tr>
                    <td class="right"><?php echo $return['return_id']; ?></td>
                    <td class="right"><?php echo $return['order_id']; ?></td>
                    <td class="left"><?php echo $return['customer']; ?></td>
                    <td class="left"><?php echo $return['product']; ?></td>
                    <td class="left"><?php echo $return['status']; ?></td>
                    <td class="left"><?php echo $return['date_added']; ?></td>
                    <td class="right"><?php foreach ($return['action'] as $action) { ?>
                      [ <a href="<?php echo $action['href']; ?>"><?php echo $action['text']; ?></a> ]
                      <?php } ?></td>
                  </tr>
                  <?php } ?>
                  <?php } else { ?>
                  <tr>
                    <td class="center" colspan="6"><?php echo $text_no_results; ?></td>
                  </tr>
                  <?php } ?>
                </tbody>
              </table>
           </div>
           <?php } ?>
       <?php if ($reviews) { ?>
       <div id="tab-latest_review" class="htabs-content">  
              <table class="list">
                <thead>
                  <tr>
                    <td class="left"><?php echo $column_product; ?></td>
                    <td class="left"><?php echo $column_author; ?></td>
                    <td class="right"><?php echo $column_rating; ?></td>
                    <td class="left"><?php echo $column_status; ?></td>
                    <td class="left"><?php echo $column_date_added; ?></td>
                    <td class="right"><?php echo $column_action; ?></td>
                  </tr>
                </thead>
                <tbody>
                  <?php if ($reviews) { ?>
                  <?php foreach ($reviews as $review) { ?>
                  <tr>
                    <td class="left"><?php echo $review['name']; ?></td>
                    <td class="left"><?php echo $review['author']; ?></td>
                    <td class="right"><?php echo $review['rating']; ?></td>
                    <td class="left"><?php echo $review['status']; ?></td>
                    <td class="left"><?php echo $review['date_added']; ?></td>
                    <td class="right"><?php foreach ($review['action'] as $action) { ?>
                      [ <a href="<?php echo $action['href']; ?>"><?php echo $action['text']; ?></a> ]
                      <?php } ?></td>
                  </tr>
                  <?php } ?>
                  <?php } else { ?>
                  <tr>
                    <td class="center" colspan="6"><?php echo $text_no_results; ?></td>
                  </tr>
                  <?php } ?>
                </tbody>
              </table>
           </div>
           <?php } ?>
     </div>
   </div>
  </div>
<?php } else { ?>
	<div class="latest">
        <div class="dashboard-heading"><?php echo $text_latest_10_orders; ?></div>
        <div class="dashboard-content">
          <table class="list">
            <thead>
              <tr>
                <td class="right"><?php echo $column_order; ?></td>
                <td class="left"><?php echo $column_customer; ?></td>
                <td class="left"><?php echo $column_status; ?></td>
                <td class="left"><?php echo $column_date_added; ?></td>
                <td class="right"><?php echo $column_total; ?></td>
                <td class="right"><?php echo $column_action; ?></td>
              </tr>
            </thead>
            <tbody>
              <?php if ($orders) { ?>
              <?php foreach ($orders as $order) { ?>
              <tr>
                <td class="right"><?php echo $order['order_id']; ?></td>
                <td class="left"><?php echo $order['customer']; ?></td>
                <td class="left"><?php echo $order['status']; ?></td>
                <td class="left"><?php echo $order['date_added']; ?></td>
                <td class="right"><?php echo $order['total']; ?></td>
                <td class="right"><?php foreach ($order['action'] as $action) { ?>
                  [ <a href="<?php echo $action['href']; ?>"><?php echo $action['text']; ?></a> ]
                  <?php } ?></td>
              </tr>
              <?php } ?>
              <?php } else { ?>
              <tr>
                <td class="center" colspan="6"><?php echo $text_no_results; ?></td>
              </tr>
              <?php } ?>
            </tbody>
          </table>
        </div>
      </div>
<?php } ?>
<!-- Admin Enhanced -->
      ]]></add>
    </operation>
    <operation error="log">
      <search position="before"><![CDATA[
      <?php echo $footer; ?>
      ]]></search>
      <add><![CDATA[
<!-- Admin Enhanced -->
<?php if ($etabs == 1) { ?>
        <script type="text/javascript"><!--
        $('#latest_tabs a').tabs();
        //--></script>
<?php } ?>
        <style type="text/css">
        <!--
        	.htabs {
        	padding: 0px 0px 0px 10px;
        	height: 30px;
        	line-height: 16px;
        	border-bottom: 1px solid #547C96;
        	margin-bottom: 15px;
        }
        .htabs a {
        	border-top: 1px solid #547C96;
        	border-left: 1px solid #547C96;
        	border-right: 1px solid #547C96;
        	background: #547C96;
        	padding: 7px 15px 6px 15px;
        	float: left;
        	font-family: Arial, Helvetica, sans-serif;
        	font-size: 13px;
        	font-weight: 500;
        	text-align: center;
        	text-decoration: none;
        	color: #f7f7f7;
        	margin-right: 2px;
        	border-radius: 3px 3px 0px 0px;
        	display: none;
        }
        .htabs a.selected {
        	padding-bottom: 7px;
        	background: #FFFFFF;
        	color: #547C96;
        }
		.egoogle {
			clear: both;
		}
		.egoogle tbody td {
			background: #FFF;
		}
        -->
        </style>

<!-- Admin Enhanced -->
      ]]></add>
    	</operation>
		<operation>
			<search position="before"><![CDATA[<div class="latest">]]></search>
			<add><![CDATA[
<!-- Admin Enhanced -->
<?php if ( $egana == 1 && isset($config_eapi_key) && isset($config_eprofile_id) ) { ?>
<div class="egoogle">
        <div class="dashboard-heading"><?php echo $text_ga_summary; ?></div>
        <div class="dashboard-content">       
        
        <div id='chart_visits'></div>      
        <div id='chart_pageviews'></div>

        <table id='list_table' width="90%" cellpadding="10" align="center">
          <tr>
            <td width="45%"><div id='list_searches'></div></td>
            <td width="45%"><div id='list_referers'></div></td>
          </tr>
        </table>

        <div style="text-align:right;"><a href="http://www.google.com/analytics/" target="_blank">Google Analytics</a></div>
        
        <script type="text/javascript">
            window.onload = function(){                
                oo.setAPIKey("<?php echo $config_eapi_key; ?>");

                oo.load(function(){
                    // Set Parameters
                    var profile_id = "<?php echo $config_eprofile_id; ?>"
                      , date_days = "30d"
                      , max_result = 10      // 10 | 20 | ...
                      , table_display = true // true | false
                      ;
                    
                    // Visits & Vistors
                    var tl1 = new oo.Timeline(profile_id, date_days);
                    tl1.addMetric("ga:visits", "<?php echo $text_ga_visits; ?>");
                    tl1.addMetric("ga:visitors", "<?php echo $text_ga_visitors; ?>");
                    tl1.draw('chart_visits');
                    
                    // PageViews
                    var tl2 = new oo.Timeline(profile_id, date_days);
                    tl2.addMetric("ga:pageviews", "<?php echo $text_ga_pageviews; ?>"); 
                    tl2.draw('chart_pageviews');
                    
                    if ( table_display ) {                    
                      // Searches                    
                      var t1 = new oo.Table(profile_id, date_days);                    
                      t1.addDimension("ga:keyword", "TOP Searches");
                      t1.addMetric("ga:visits", "<?php echo $text_ga_visits; ?>");
                      t1.addMetric("ga:searchResultViews", "ResultViews");                    
                      //t1.query.setFilter("ga:searchResultViews>0");                     
                      t1.query.setSort('-ga:visits');
                      t1.query.setMaxResults(max_result);
                      t1.draw('list_searches');                    
                      
                      // Referers                    
                      var t2 = new oo.Table(profile_id, date_days);
                      t2.addDimension("ga:source", "TOP Referers");
                      t2.addMetric("ga:visits", "<?php echo $text_ga_visits; ?>");  // veskera navstevnost
                      t2.addMetric("ga:pageviews", "<?php echo $text_ga_pageviews; ?>");                   
                      t2.query.setFilter("ga:medium==referral"); // odkazujici stranky                    
                      t2.query.setSort('-ga:pageviews');
                      t2.query.setMaxResults(max_result);
                      t2.draw('list_referers');  
                    } else {
                      // document.getElementById("list_table").style.display = 'none';
                    }
                });
            };
        </script>
  </div>
</div>
<br />
<?php } ?>
<!-- Admin Enhanced -->      
      ]]></add>
		</operation>
    </file>
	
	<file name="admin/view/template/sale/order_list.tpl">
		<operation>
			<search position="replace"><![CDATA[<div class="buttons">]]></search>
			<add><![CDATA[<?php if ($emisc3 == 1) { ?><div class="buttons"><a onclick="clearFilters();" class="button" style="background: #C30;"><?php echo $button_clear_filters;?></a><?php } else { ?><div class="buttons"><?php } ?>]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA[function filter() ]]></search>
			<add><![CDATA[function clearFilters() {
url = 'index.php?route=sale/order&token=<?php echo $token; ?>';
	
	var filter_order_id = '';	
	if (filter_order_id) {
		url += '&filter_order_id=' + encodeURIComponent(filter_order_id);
	}
	
	var filter_customer = '';	
	if (filter_customer) {
		url += '&filter_customer=' + encodeURIComponent(filter_customer);
	}
	
	var filter_order_status_id = '';	
	if (filter_order_status_id != '*') {
		url += '&filter_order_status_id=' + encodeURIComponent(filter_order_status_id);
	}	

	var filter_total = '';
	if (filter_total) {
		url += '&filter_total=' + encodeURIComponent(filter_total);
	}	
	
	var filter_date_added = '';	
	if (filter_date_added) {
		url += '&filter_date_added=' + encodeURIComponent(filter_date_added);
	}
	
	var filter_date_modified = '';	
	if (filter_date_modified) {
		url += '&filter_date_modified=' + encodeURIComponent(filter_date_modified);
	}
				
	location = url;
}]]></add>
		</operation>
	</file>
	
	<file name="admin/view/template/sale/customer_list.tpl">
		<operation>
			<search position="replace"><![CDATA[<div class="buttons">]]></search>
			<add><![CDATA[<?php if ($emisc3 == 1) { ?><div class="buttons"><a onclick="clearFilters();" class="button" style="background: #C30;"><?php echo $button_clear_filters;?></a><?php } else { ?><div class="buttons"><?php } ?>]]></add>
		</operation>
		<operation>
			<search position="before"><![CDATA[function filter() ]]></search>
			<add><![CDATA[function clearFilters() {
url = 'index.php?route=sale/customer&token=<?php echo $token; ?>';
	
	var filter_name = '';	
	if (filter_name) {
		url += '&filter_name=' + encodeURIComponent(filter_name);
	}
	
	var filter_email = '';	
	if (filter_email) {
		url += '&filter_email=' + encodeURIComponent(filter_email);
	}
	
	var filter_customer_group_id = '';	
	if (filter_customer_group_id != '*') {
		url += '&filter_customer_group_id=' + encodeURIComponent(filter_customer_group_id);
	}	
	
	var filter_status = '*';	
	if (filter_status != '*') {
		url += '&filter_status=' + encodeURIComponent(filter_status); 
	}	
	
	var filter_approved = '*';	
	if (filter_approved != '*') {
		url += '&filter_approved=' + encodeURIComponent(filter_approved);
	}	
	
	var filter_ip = '';	
	if (filter_ip) {
		url += '&filter_ip=' + encodeURIComponent(filter_ip);
	}
		
	var filter_date_added = '';	
	if (filter_date_added) {
		url += '&filter_date_added=' + encodeURIComponent(filter_date_added);
	}
	
	location = url;
}]]></add>
		</operation>
	</file>
	
</modification>